/*! jquery.views.js v1.0.2: http://jsviews.com/ */
!function(e,t){var n=t.jQuery;"object"==typeof exports?module.exports=n?e(t,n):function(n){return e(t,n)}:"function"==typeof define&&define.amd?define(["jquery","./jsrender","./jquery.observable"],function(n,i,r){return e(t,n,i,r)}):e(t,!1)}(function(e,t,n,i){"use strict";function r(e,t,n,i){var r,a,o,l,s,d,p,f,c,v,g,u,_,h,m,x,b,k;if(n&&n._tgId&&(k=n,n=k._tgId,k.bindTo||(S(dt[n],k),k.bindTo=[0])),(d=dt[n])&&(g=d.to))for(g=g[t||0],r=d.linkCtx,c=r.elem,s=r.view,k=r.tag,!k&&g._cxp&&(k=g._cxp.path!==xe&&g._cxp.tag,p=e[0],e=[],e[g._cxp.ind]=p),k&&(k._.chg=1,(o=k.convertBack)&&(a=ce(o)?o:s.getRsc("converters",o))),"SELECT"===c.nodeName&&(c.multiple&&null===e[0]&&(e=[[]]),c._jsvSel=e),f=e,a&&(e=a.apply(k,e),void 0===e&&(g=[]),e=Z(e)?e:[e]),x=g.length;x--;)if((u=g[x])&&(u=u+""===u?[r.data,u]:u,l=u[0],_=u.tag,p=(l&&l._ocp&&!l._vw?f:e)[x],!(void 0===p||k&&k.onBeforeUpdateVal&&k.onBeforeUpdateVal(i,{change:"change",data:l,path:u[1],index:x,tagElse:t,value:p})===!1)))if(_)void 0!==(b=_._.toIndex[u.ind])&&_.updateValue(p,b,u.tagElse,void 0,void 0,i),_.setValue(p,u.ind,u.tagElse);else if(void 0!==p&&l){if((_=i&&(v=i.target)._jsvInd===x&&v._jsvLkEl)&&void 0!==(b=_._.fromIndex[x])&&_.setValue(f[x],b,v._jsvElse),l._cpfn)for(m=r._ctxCb,h=l,l=r.data,h._cpCtx&&(l=h.data,m=h._cpCtx);h&&h.sb;)l=m(h,l),h=h.sb;Y(l).setProperty(u[1],p)}if(k)return k._.chg=void 0,k}function a(e){var n,i,r=e.target,a=f(r),o=Ye[a];if(!r._jsvTr||e.delegateTarget!==we&&"number"!==e.target.type||"input"===e.type){for(i=ce(a)?a(r):(r=t(r),o?r[o]():r.attr(a)),e.target._jsvChg=1,xt.lastIndex=0;n=xt.exec(e.target._jsvBnd);)R(i,r._jsvInd,r._jsvElse,void 0,n[1],e);e.target._jsvChg=void 0}}function o(e,t){var n,i,r,a,o,l,d,p,c,v=this,u=v.fn,_=v.tag,h=v.data,m=v.elem,x=v.convert,b=m.parentNode,k=v.view,C=k._lc,y=t&&q(k,qe,_);if(b&&(!y||y.call(_||v,e,t)!==!1)&&(!t||"*"===e.data.prop||e.data.prop===t.path)){if(k._lc=v,t&&(v.eventArgs=t),t||v._toLk){if(v._toLk=0,u._er)try{i=u(h,k,de)}catch(E){o=u._er,l=ye(E,k,new Function("data,view","return "+o+";")(h,k)),i=[{props:{},args:[l],tag:_}]}else i=u(h,k,de);if(n=_&&_.attr||v.attr||(v._dfAt=f(m,!0,void 0!==x)),n===He&&(_&&_.parentElem||v.elem).type===$e&&(n=Re),_){if(a=o||_._er,i=i[0]?i:[i],r=!a&&(_.onUpdate===!1||t&&ce(_.onUpdate)&&_.onUpdate(e,t,i)===!1),P(_,i,a),_._.chg&&(n===me||n===He)||r||n===Ke)return A(_,e,t),_._.chg||g(v,h,m),k._lc=C,t&&(y=q(k,De,_))&&y.call(_||v,e,t),void(_.tagCtx.props.dataMap&&_.tagCtx.props.dataMap.map(_.tagCtx.args[0],_.tagCtx,_.tagCtx.map,isRenderCall||!_._.bnd));for(_.onUnbind&&_.onUnbind(_.tagCtx,v,_.ctx,e,t),_.linkedElems=_.linkedElem=_.mainElem=_.displayElem=void 0,c=_.tagCtxs.length;c--;)p=_.tagCtxs[c],p.linkedElems=p.mainElem=p.displayElem=void 0;i=":"===_.tagName?de._cnvt(_.convert,k,i[0]):de._tag(_,k,k.tmpl,i,!0,l)}else u._tag&&(x=""===x?Je:x,i=x?de._cnvt(x,k,i[0]||i):de._tag(u._tag,k,k.tmpl,i,!0,l),F(_=v.tag),n=v.attr||n);(d=_&&(!_.inline||v.fn._lr)&&_.template)&&g(v,h,m),s(i,v,n,_),v._noUpd=0,_&&(_._er=o,A(_,e,t))}d||g(v,h,m),_&&_._.ths&&_.updateValue(_,_.bindTo?_.bindTo.length:1),t&&(y=q(k,De,_))&&y.call(_||v,e,t),k._lc=C}}function l(e,t){e._df=t,e[(t?"set":"remove")+"Attribute"](Xe,"")}function s(n,i,r,a){var o,s,d,p,f,c,v,g,_,h,m,x,b,k,C=!(r===Ke||void 0===n||i._noUpd||(r===He||r===me)&&!a&&i.elem._jsvChg),y=i.data,E=a&&a.parentElem||i.elem,w=E.parentNode,j=t(E),A=i.view,T=i._val,I=a;return a&&(a._.unlinked=!0,a.parentElem=a.parentElem||i.expr||a._elCnt?E:w,s=a._prv,d=a._nxt),C?("visible"===r&&(r="css-display"),/^css-/.test(r)?("visible"===i.attr&&(b=(E.currentStyle||kt.call(e,E,"")).display,n?(n=E._jsvd||b,n!==Ke||(n=st[x=E.nodeName])||(m=le.createElement(x),le.body.appendChild(m),n=st[x]=(m.currentStyle||kt.call(e,m,"")).display,le.body.removeChild(m))):(E._jsvd=b,n=Ke)),(I=I||T!==n)&&t.style(E,r.slice(4),n)):"link"!==r&&(/^data-/.test(r)?t.data(E,r.slice(5),n):/^prop-/.test(r)?(c=!0,r=r.slice(5)):r===Re?(c=!0,n=n&&"false"!==n):r===Fe?(c=!0,r=Re,n=E.value===n):"selected"===r||"disabled"===r||"multiple"===r||"readonly"===r?n=n&&"false"!==n?r:null:r===He&&"SELECT"===E.nodeName&&(E._jsvSel=Z(n)?n:""+n),(o=Ye[r])?r===me?a&&a.inline?(f=a.nodes(!0),a._elCnt&&(s&&s!==d?D(s,d,E,a._tgId,"^",!0):(v=s?s.getAttribute(Ue):E._df,g=a._tgId+"^",_=v.indexOf("#"+g)+1,h=v.indexOf("/"+g),_&&h>0&&(_+=g.length,h>_&&(O(v.slice(_,h)),v=v.slice(0,_)+v.slice(h),s?s.setAttribute(Ue,v):E._df&&l(E,v)))),s=s?s.previousSibling:d?d.previousSibling:E.lastChild),t(f).remove(),p=A.link(A.data,E,s,d,n,a&&{tag:a._tgId})):(C=C&&T!==n,C&&(j.empty(),p=A.link(y,E,s,d,n,a&&{tag:a._tgId}))):((I=I||T!==n)&&("text"===r&&E.children&&!E.children[0]?E[Le]=null===n?"":n:j[o](n)),!(k=w._jsvSel)||r!==He&&j.attr(He)||(E.selected=Ct(""+n,Z(k)?k:[k])>-1)):(I=I||T!==n)&&j[c?"prop":"attr"](r,void 0!==n||c?n:null)),i._val=n,u(p),I):void(i._val=n)}function d(e,t){var n=this,i=q(n,qe,n.tag),r=q(n,De,n.tag);if(!i||i.call(n,e,t)!==!1){if(t){var a=t.change,o=t.index,l=t.items;switch(n._.srt=t.refresh,a){case"insert":n.addViews(o,l);break;case"remove":n.removeViews(o,l.length);break;case"move":n.moveViews(t.oldIndex,o,l.length);break;case"refresh":n._.srt=void 0,n.fixIndex(0)}}r&&r.call(n,e,t)}}function p(e){var n,i,r=e.type,a=e.data,o=e._.bnd;!e._.useKey&&o&&((i=e._.bndArr)&&(t([i[1]]).off(he,i[0]),e._.bndArr=void 0),o!==!!o?r?o._.arrVws[e._.id]=e:delete o._.arrVws[e._.id]:r&&a&&(n=function(t){t.data&&t.data.off||d.apply(e,arguments)},t([a]).on(he,n),e._.bndArr=[n,a]))}function f(e,t,n){var i=e.nodeName.toLowerCase(),r=ue._fe[i]||e.contentEditable===Je&&{to:me,from:me};return r?t?"input"===i&&e.type===Fe?Fe:r.to:r.from:t?n?"text":me:""}function c(e,n,i,r,a,o,l){var s,d,p,f,c,v=e.parentElem,g=e._prv,_=e._nxt,h=e._elCnt;if(g&&g.parentNode!==v&&Ce("Missing parentNode"),l){f=e.nodes(),h&&g&&g!==_&&D(g,_,v,e._.id,"_",!0),e.removeViews(void 0,void 0,!0),d=_,h&&(g=g?g.previousSibling:_?_.previousSibling:v.lastChild),t(f).remove();for(c in e._.bnds)L(c)}else{if(n){if(p=r[n-1],!p)return!1;g=p._nxt}h?(d=g,g=d?d.previousSibling:v.lastChild):d=g.nextSibling}s=i.render(a,o,e._.useKey&&l,e,l||n,!0),u(e.link(a,v,g,d,s,p))}function v(e,t,n){var i,r;return n?(r="^`",F(n),i=n._tgId,i||(dt[i=pt++]=n,n._tgId=""+i)):(r="_`",Se[i=t._.id]=t),"#"+i+r+(void 0!=e?e:"")+"/"+i+r}function g(e,t,n){var i,r,a,o,l,s,d,p,f,c,v,g,u=e.tag,_=e.convertBack,h=e._hdl;if(t="object"==typeof t&&t,u&&((f=u.convert)&&(f=f===Je?u.tagCtx.props.convert:f,f=e.view.getRsc("converters",f)||f,f=f&&f.depends,f=f&&de._dp(f,t,h)),(c=u.tagCtx.props.depends||u.depends)&&(c=de._dp(c,u,h),f=f?f.concat(c):c),g=u.linkedElems),f=f||[],!e._depends||""+e._depends!=""+f){if(l=e.fn.deps.slice(),e._depends&&(v=e._depends.bdId,Y._apply(1,[t],l,e._depends,h,e._ctxCb,!0)),u)for(r=u.boundProps.length;r--;)for(d=u.boundProps[r],a=u._.bnd.paths.length;a--;)p=u._.bnd.paths[a]["_"+d],p&&p.length&&p.skp&&(l=l.concat(p));for(r=l.length;r--;)s=l[r],s._cpfn&&(l[r]=fe({},s));if(i=Y._apply(1,[t],l,f,h,e._ctxCb),v||(v=e._bndId||""+pt++,e._bndId=void 0,n._jsvBnd=(n._jsvBnd||"")+"&"+v,e.view._.bnds[v]=v),i.elem=n,i.linkCtx=e,i._tgId=v,f.bdId=v,e._depends=f,dt[v]=i,(g||void 0!==_||u&&u.bindTo)&&S(i,u,_),g)for(r=g.length;r--;)for(o=g[r],a=o&&o.length;a--;)o[a]._jsvLkEl=u,V(u,o[a]),o[a]._jsvBnd="&"+v+"+";else void 0!==_&&V(u,n);u&&!u.inline&&(u.flow||n.setAttribute(Ue,(n.getAttribute(Ue)||"")+"#"+v+"^/"+v+"^"),u._tgId=""+v)}}function u(e){var t;if(e)for(;t=e.pop();)t._hdl()}function _(e,t,n,i,r,a,o){return h(this,e,t,n,i,r,a,o)}function h(e,n,i,r,o,s,d,p){if(r===!0?(o=r,r=void 0):r="object"!=typeof r?void 0:fe({},r),e&&n){n=n.jquery?n:t(n),we||(we=le.body,Pe="oninput"in we,t(we).on(Me,a).on("blur.jsv","[contenteditable]",a));for(var f,c,g,_,h,m,b,k,C,E,w=v,j=r&&"replace"===r.target,A=n.length;A--;){if(b=n[A],s=s||Ae(b),(C=s===oe)&&(oe.data=(oe.ctx=r||{}).root=i),""+e===e)x(E=[],e,b,s,void 0,"expr",i,r);else{if(void 0!==e.markup)j&&(m=b.parentNode),s._.scp=!0,g=e.render(i,r,o,s,void 0,w,!0),s._.scp=void 0,m?(d=b.previousSibling,p=b.nextSibling,t.cleanData([b],!0),m.removeChild(b),b=m):(d=p=void 0,t(b).empty());else{if(e!==!0||s!==oe)break;k={lnk:"top"}}if(b._df&&!p){for(_=y(b._df,!0,vt),f=0,c=_.length;f<c;f++)h=_[f],(h=Se[h.id])&&void 0!==h.data&&h.parent.removeViews(h._.key,void 0,!0);l(b)}E=s.link(i,b,d,p,g,k,r)}u(E)}}return n}function m(e,n,i,r,a,o,s,f){function c(e,t,n,i,r,o,l,s,d,p,f,c,v,g){var u,_,m="";return g?(h=0,e):(b=(d||p||"").toLowerCase(),i=i||f,n=n||v,Z&&!n&&(!e||i||b||o&&!h)&&(Z=void 0,Y=me.shift()),i=i||n,i&&(i=i.toLowerCase(),h=0,Z=void 0,z&&(n||v?lt[Y]||/;svg;|;math;/.test(";"+me.join(";")+";")||(u="'<"+Y+".../"):lt[i]?u="'</"+i:me.length&&i===Y||(u="Mismatch: '</"+i),u&&be(u+">' in:\n"+a)),re=ie,Y=me.shift(),ie=at[Y],f=f?"</"+f+">":"",re&&(_e+=oe,oe="",ie?_e+="-":(m=f+We+"@"+_e+Qe+(c||""),_e=xe.shift()))),ie?(o?oe+=o:t=f||v||"",b&&(t+=b,oe&&(t+=" "+Ue+'="'+oe+'"',oe=""))):t=o?t+m+r+(h?"":We+o+Qe)+s+b:m||e,z&&l&&(h&&be("{^{ within elem markup ("+h+' ). Use data-link="..."'),"#"===o.charAt(0)?me.unshift(o.slice(1)):o.slice(1)!==(_=me.shift())&&be("Closing tag for {^{...}} under different elem: <"+_+">")),b&&(h=b,me.unshift(Y),Y=b.slice(1),z&&me[0]&&me[0]===ot[Y]&&Ce("Parent of <tr> must be <tbody>"),Z=lt[Y],(ie=at[Y])&&!re&&(xe.unshift(_e),_e=""),re=ie,_e&&ie&&(_e+="+")),t)}function g(e,t){var i,r,a,o,s,f,c,g=[];if(e){for("@"===e._tkns.charAt(0)&&(t=N.previousSibling,N.parentNode.removeChild(N),N=void 0),V=e.length;V--;){if(B=e[V],a=B.ch,i=B.path)for(I=i.length-1;r=i.charAt(I--);)"+"===r?"-"===i.charAt(I)?(I--,t=t.previousSibling):t=t.parentNode:t=t.lastChild;"^"===a?(b=dt[s=B.id])&&(c=t&&(!N||N.parentNode!==t),N&&!c||(b.parentElem=t),B.elCnt&&c&&l(t,(B.open?"#":"/")+s+a+(t._df||"")),g.push([c?null:N,B])):(P=Se[s=B.id])&&(P.parentElem||(P.parentElem=t||N&&N.parentNode||n,P._.onRender=v,P._.onArrayChange=d,p(P)),o=P.parentElem,B.open?(P._elCnt=B.elCnt,t&&!N?l(t,"#"+s+a+(t._df||"")):(P._prv||l(o,k(o._df,"#"+s+a)),P._prv=N)):(!t||N&&N.parentNode===t?N&&(P._nxt||l(o,k(o._df,"/"+s+a)),P._nxt=N):(l(t,"/"+s+a+(t._df||"")),P._nxt=void 0),(f=q(P,Oe)||Ee)&&f.call(P.ctx.tag,P)))}for(V=g.length;V--;)he.push(g[V])}return!e||e.elCnt}function u(e){var t,n,i;if(e)for(V=e.length,I=0;I<V;I++)if(B=e[I],b=dt[B.id],!b._is&&b.linkCtx&&(n=b=b.linkCtx.tag,i=b.tagName===K,!b.flow||i)){if(!F){for(t=1;n=n.parent;)t++;J=J||t}!F&&t!==J||K&&!i||$.push(b)}}function _(){var o,l,d="",p={},f=Ie+(ce?",["+Xe+"]":"");for(S=rt?n.querySelectorAll(f):t(f,n).get(),T=S.length,i&&i.innerHTML&&(U=rt?i.querySelectorAll(f):t(f,i).get(),i=U.length?U[U.length-1]:i),J=0,j=0;j<T;j++)if(N=S[j],i&&!de)de=N===i;else{if(r&&N===r){ce&&(d+=C(N));break}if(N.parentNode)if(ce){if(d+=C(N),N._df){for(o=j+1;o<T&&N.contains(S[o]);)o++;p[o-1]=N._df}p[j]&&(d+=p[j]||"")}else fe&&(B=y(N,void 0,ut))&&(B=B[0])&&(pe=pe?B.id!==pe&&pe:B.open&&B.id),!pe&&we(y(N))&&N.getAttribute(Te)&&he.push([N])}if(ce&&(d+=n._df||"",(l=d.indexOf("#"+ce.id)+1)&&(d=d.slice(l+ce.id.length)),l=d.indexOf("/"+ce.id),l+1&&(d=d.slice(0,l)),u(y(d,void 0,ht))),void 0===a&&n.getAttribute(Te)&&he.push([n]),E(i,ie),E(r,ie),!ce)for(ie&&_e+oe&&(N=r,_e&&(r?g(y(_e+"+",!0),r):g(y(_e,!0),n)),g(y(oe,!0),n),r&&(d=r.getAttribute(Ue),(T=d.indexOf(se)+1)&&(d=d.slice(T+se.length-1)),r.setAttribute(Ue,oe+d))),T=he.length,j=0;j<T;j++)N=he[j],L=N[1],N=N[0],L?(b=dt[L.id])&&((m=b.linkCtx)&&(b=m.tag,b.linkCtx=m),L.open?(N&&(b.parentElem=N.parentNode,b._prv=N),b._elCnt=L.elCnt,P=b.tagCtx.view,x(ye,void 0,b._prv,P,L.id)):(b._nxt=N,b._.unlinked&&!b._toLk&&(H=b.tagCtx,P=H.view,A(b)))):x(ye,N.getAttribute(Te),N,Ae(N),void 0,fe,e,s)}var h,m,b,j,T,I,V,S,N,P,B,L,U,M,D,O,R,$,F,K,H,z,J,Q,W,X,G,Y,Z,ee,te,ne,ie,re,ae,oe,se,de,pe,fe,ce,ve=this,ge=ve._.id+"_",_e="",he=[],me=[],xe=[],ye=[],Ee=q(ve,Oe),we=g;if(o&&(o.tmpl?D="/"+o._.id+"_":(fe=o.lnk,o.tag&&(ge=o.tag+"^",o=!0),(ce=o.get)&&(we=u,$=ce.tags,F=ce.deep,K=ce.name)),o=o===!0),n=n?""+n===n?t(n)[0]:n.jquery?n[0]:n:ve.parentElem||le.body,z=!ue.noValidate&&n.contentEditable!==Je,Y=n.tagName.toLowerCase(),ie=!!at[Y],i=i&&w(i,ie),r=r&&w(r,ie)||null,void 0!=a){if(te=le.createElement("div"),ee=te,se=oe="",ae="http://www.w3.org/2000/svg"===n.namespaceURI?"svg_ns":(G=ke.exec(a))&&G[1]||"",ie){for(R=r;R&&!(O=y(R));)R=R.nextSibling;(ne=O?O._tkns:n._df)&&(M=D||"",!o&&D||(M+="#"+ge),I=ne.indexOf(M),I+1&&(I+=M.length,se=oe=ne.slice(0,I),ne=ne.slice(I),O?R.setAttribute(Ue,ne):l(n,ne)))}if(Z=void 0,a=(""+a).replace(ct,c),z&&me.length&&be("Mismatched '<"+Y+"...>' in:\n"+a),f)return;for(it.appendChild(te),ae=Ve[ae]||Ve.div,Q=ae[0],ee.innerHTML=ae[1]+a+ae[2];Q--;)ee=ee.lastChild;for(it.removeChild(te),W=le.createDocumentFragment();X=ee.firstChild;)W.appendChild(X);n.insertBefore(W,r)}return _(),ye}function x(e,t,n,i,r,a,o,l){var s,d,p,c,v,g,u,_,h,m,x,k=[];if(r)_=dt[r],_=_.linkCtx?_.linkCtx.tag:_,u=_.linkCtx||{type:"inline",data:i.data,elem:_._elCnt?_.parentElem:n,view:i,ctx:i.ctx,attr:me,fn:_._.bnd,tag:_,_bndId:r},_.linkCtx=u,b(u,e),_._toLk=u._bndId;else if(t&&n){for(o=a?o:i.data,s=i.tmpl,t=j(t,f(n)),x=je.lastIndex=0;d=je.exec(t);)k.push(d),x=je.lastIndex;for(x<t.length&&be(t);d=k.shift();){for(h=je.lastIndex,p=d[1],v=d[3];k[0]&&"else"===k[0][4];)v+=re+te+k.shift()[3],m=!0;m&&(v+=re+te+ne+"/"+d[4]+ie),u={type:a||"link",data:o,elem:n,view:i,ctx:l,attr:p,_toLk:1,_noUpd:d[2]},c=void 0,d[6]&&(c=d[10]||void 0,u.convert=d[5]||"",void 0!==c&&f(n)&&(p&&be(v+"- Remove target: "+p),u.convertBack=c=c.slice(1))),u.expr=p+v,g=s.links[v],g||(s.links[v]=g=de.tmplFn(v.replace(Ee,"\\$&"),s,!0,c,m)),u.fn=g,b(u,e),je.lastIndex=h}}}function b(e,n){function i(t,n){o.call(e,t,n)}var r,a=e.type;if("top"!==a&&"expr"!==a||(e.view=new de.View(de.extendCtx(e.ctx,e.view.ctx),"link",e.view,e.data,e.expr,(void 0),v)),e._ctxCb=de._gccb(r=e.view),e._hdl=i,"SELECT"===e.elem.nodeName&&"link"===a&&!e.attr){var l=t(e.elem);l.on("jsv-domchange",function(){if(!arguments[3].refresh){var t=e.fn(r.data,r,de);l.val(e.convert||e.convertBack?de._cnvt(e.convert,r,t):t)}})}e.fn._lr?(e._toLk=1,n.push(e)):i(!0)}function k(e,t){var n;return e?(n=e.indexOf(t),n+1?e.slice(0,n)+e.slice(n+t.length):e):""}function C(e){return e&&(""+e===e?e:e.tagName===ze?e.type.slice(3):1===e.nodeType&&e.getAttribute(Ue)||"")}function y(e,t,n){function i(e,t,n,i,a,l){o.push({elCnt:r,id:i,ch:a,open:t,close:n,path:l,token:e})}var r,a,o=[];if(a=t?e:C(e))return r=o.elCnt=e.tagName!==ze,r="@"===a.charAt(0)||r,o._tkns=a,a.replace(n||mt,i),o}function E(e,t){e&&("jsv"===e.type?e.parentNode.removeChild(e):t&&""===e.getAttribute(Te)&&e.removeAttribute(Te))}function w(e,t){for(var n=e;t&&n&&1!==n.nodeType;)n=n.previousSibling;return n&&(1!==n.nodeType?(n=le.createElement(ze),n.type="jsv",e.parentNode.insertBefore(n,e)):C(n)||n.getAttribute(Te)||n.setAttribute(Te,"")),n}function j(e,n){return e=t.trim(e),e.slice(-1)!==ie?e=ne+":"+e+(n?":":"")+ie:e}function A(e,n,i){function r(){a=C.linkedElems||e.linkedElems||e.linkedElem&&[e.linkedElem],a&&(e.linkedElems=C.linkedElems=a,e.linkedElem=a[0]=e.linkedElem||a[0]),(l=C.mainElem||e.mainElem)&&(C.mainElem=e.mainElem=l),(l=C.displayElem||e.displayElem)&&(C.displayElem=e.displayElem=l)}var a,o,l,s,d,p,f,c,v,g,u,_,h,m,x,b,k,C=e.tagCtx,y=e.tagCtxs,E=y&&y.length,w=e.linkCtx,j=e.bindTo||{};if(e._.unlinked){if(p=t(w.elem),e.linkedElement||e.mainElement||e.displayElement){if(o=e.linkedElement)for(e.linkedElem=void 0,s=o.length;s--;)if(o[s])for(f=!e.inline&&p.filter(o[s]),d=E;d--;)g=y[d],a=g.linkedElems=g.linkedElems||new Array(s),l=f[0]?f:g.contents(!0,o[s]),l[0]&&l[0].type!==Fe&&(a[s]=l.eq(0));if(o=e.mainElement)for(f=!e.inline&&p.filter(o),d=E;d--;)g=y[d],l=f[0]?f:g.contents(!0,o).eq(0),l[0]&&(g.mainElem=l);if(o=e.displayElement)for(f=!e.inline&&p.filter(o),d=E;d--;)g=y[d],l=f[0]?f:g.contents(!0,o).eq(0),l[0]&&(g.displayElem=l);r()}e.onBind&&(e.onBind(C,w,e.ctx,n,i),r())}for(d=E;d--;){if(g=y[d],u=g.props,e._.unlinked&&g.map&&e.mapProps){for(x=e.mapProps.length,b=u.mapDepends||e.mapDepends||[],b=Z(b)?b:[b];x--;){var A=e.mapProps[x];k=e._.bnd.paths[d]["_"+A],k&&k.length&&k.skp&&(b=b.concat(k))}b.length&&g.map.observe(b,w)}(l=g.mainElem||!e.mainElement&&g.linkedElems&&g.linkedElems[0])&&(l[0]&&u.id&&!l[0].id&&(l[0].id=u.id),e.setSize&&((_=!j.height&&u.height||e.height)&&l.height(_),(_=!j.width&&u.width||e.width)&&l.width(_))),(_=(l=g.displayElem||l)&&(!j["class"]&&u["class"]||e.className))&&(h=l[0]._jsvCl,_!==h&&(l.hasClass(h)&&l.removeClass(h),l.addClass(_),l[0]._jsvCl=_))}if(e.onAfterLink&&(e.onAfterLink(C,w,e.ctx,n,i),r()),!e.flow&&!e._.chg)for(e._tgId&&e._.unlinked&&(e.linkedElems||e.bindTo)&&S(dt[e._tgId],e),d=y.length;d--;){for(u=e.cvtArgs(d,1),s=u.length;s--;)_=u[s],e.setValue(_,s,d);if(e._.unlinked)for(C=y[d],a=C.linkedElems||!d&&e.linkedElem&&[e.linkedElem],m=(e.bindTo||[0]).length;m--;)if((l=a&&a[m])&&(s=l.length))for(;s--;)c=l[s],v=c._jsvLkEl,v&&v===e||(c._jsvLkEl=e,c._jsvInd=m,c._jsvElse=d,V(e,c),c._jsvBnd="&"+e._tgId+"+")}e._.unlinked=void 0,e._.lt&&e.refresh()}function T(e){var t=e.which;t>15&&t<21||t>32&&t<41||t>111&&t<131||27===t||144===t||setTimeout(function(){a(e)})}function I(e,t,n){t!==!0||!Pe||Be&&e[0].contentEditable===Je?(t=""+t===t?t:"keydown.jsv",e[n](t,t.indexOf("keydown")>=0?T:a)):e[n]("input.jsv",a)}function V(e,n){var i,r,a=n._jsvTr||!1;e&&(r=e.tagCtx.props.trigger,void 0===r&&(r=e.trigger)),void 0===r&&(r=pe.trigger),r=r&&("INPUT"===n.tagName&&n.type!==$e&&n.type!==Fe||"textarea"===n.type||n.contentEditable===Je)&&r||!1,a!==r&&(i=t(n),I(i,a,"off"),I(i,n._jsvTr=r,"on"))}function S(e,t,n){var i,r,a,o,l,s,d,p,f,c,v,g,u,_,h=1,m=[],x=e.linkCtx,b=x.data,k=x.fn.paths;if(e&&!e.to){for(t&&(t.convertBack||(t.convertBack=n),s=t.bindTo,h=t.tagCtxs?t.tagCtxs.length:1);h--;){if(u=[],g=k[h])for(s=g._jsvto?["jsvto"]:s||[0],!h&&t&&t._.ths&&(s=s.concat("this")),p=s.length;p--;){if(r="",v=x._ctxCb,d=s[p],d=g[+d===d?d:"_"+d],i=d&&d.length){if(a=d[i-1],a._cpfn){for(o=a;a.sb&&a.sb._cpfn;)r=a=a.sb;r=a.sb||r&&r.path,a=r?r.slice(1):o.path}l=r?[o,a]:N(a,b,v)}else c=t.linkedCtxParam,l=[],_=t._.fromIndex,_&&c&&c[_[p]]&&(l=[t.tagCtxs[h].ctx[c[_[p]]][0],xe]);(f=l._cxp)&&f.tag&&a.indexOf(".")<0&&(l=f),u.unshift(l)}m.unshift(u)}e.to=m}}function N(e,t,n){for(var i,r,a,o,l,s,d,p;e&&e!==xe&&(a=n(i=e.split("^").join("."),t))&&(o=a.length);){if(l=a[0]._cxp)if(d=d||l,s=a[0][0],xe in s?(p=s,s=s._vw):p=s.data,d.path=e=a[0][1],a=[d.data=p,e],n=de._gccb(s),e._cpfn){for(r=e,r.data=a[0],r._cpCtx=n;e.sb&&e.sb._cpfn;)i=e=e.sb;i=e.sb||i&&i.path,e=i?i.slice(1):r.path,a=[r,e]}else l.tag&&l.path===xe&&(a=l);else a=o>1?[a[o-2],a[o-1]]:[a[o-1]];t=a[0],e=a[1]}return a=a||[t,i],a._cxp=d,a}function P(e,t,n){var i,r,a=e.tagCtx.view,o=e.tagCtxs||[e.tagCtx],l=o.length,s=!t;if(s){if(t=e._.bnd.call(a.tmpl,(e.linkCtx||a).data,a,de),t.lt)return;e._.lt=void 0,t=Z(t)?t:[t]}if(n)o=e.tagCtxs=t,e.tagCtx=o[0],F(e);else for(;l--;)i=o[l],r=t[l],Y(i.props).setProperty(r.props),fe(i.ctx,r.ctx),i.args=r.args,s&&(i.tmpl=r.tmpl);return de._thp(e,o[0]),o}function B(e){for(var t,n,i,r=[],a=e.length,o=a;o--;)r.push(e[o]);for(o=a;o--;)if(n=r[o],n.parentNode){if(i=n._jsvBnd)for(i=i.slice(1).split("&"),n._jsvBnd="",t=i.length;t--;)L(i[t],n._jsvLkEl,n);O(C(n)+(n._df||""),n)}}function L(e,n,i){var r,a,o,l,s,d,p,f,c,v,g,u,_,h,m=dt[e];if(n)i._jsvLkEl=void 0;else if(m&&(!i||i===m.elem)){delete dt[e];for(r in m.bnd)l=m.bnd[r],s=m.cbId,Z(l)?t([l]).off(he+s).off(_e+s):t(l).off(_e+s),delete m.bnd[r];if(a=m.linkCtx){if(o=a.tag){if(d=o.tagCtxs)for(p=d.length;p--;)u=d[p],(f=u.map)&&f.unmap(),(_=u.linkedElems)&&(h=(h||[]).concat(_));o.onUnbind&&o.onUnbind(o.tagCtx,a,o.ctx),o.onDispose&&o.onDispose(),o._elCnt||(o._prv&&o._prv.parentNode.removeChild(o._prv),o._nxt&&o._nxt.parentNode.removeChild(o._nxt))}for(_=h||[t(a.elem)],p=_.length;p--;)c=_[p],(v=c&&c[0]&&c[0]._jsvTr)&&(I(c,v,"off"),c[0]._jsvTr=void 0);g=a.view,"link"===g.type?g.parent.removeViews(g._.key,void 0,!0):delete g._.bnds[e]}delete m.s[m.cbId]}}function U(e){e?(e=e.jquery?e:t(e),e.each(function(){for(var e;(e=Ae(this,!0))&&e.parent;)e.parent.removeViews(e._.key,void 0,!0);B(this.getElementsByTagName("*"))}),B(e)):(we&&(t(we).off(Me,a).off("blur.jsv","[contenteditable]",a),we=void 0),oe.removeViews(),B(le.body.getElementsByTagName("*")))}function M(e){return e.type===$e?e[Re]:e.value}function q(e,t,n){return n&&n[t]||e.ctx[t]&&e.ctxPrm(t)||ee.helpers[t]}function D(e,t,n,i,r,a){var o,s,d,p,f,c,v,g=0,u=e===t;if(e){for(d=y(e)||[],o=0,s=d.length;o<s;o++){if(p=d[o],c=p.id,c===i&&p.ch===r){if(!a)break;s=0}u||(f="_"===p.ch?Se[c]:dt[c].linkCtx.tag,f&&(p.open?f._prv=t:p.close&&(f._nxt=t))),g+=c.length+2}g&&e.setAttribute(Ue,e.getAttribute(Ue).slice(g)),v=t?t.getAttribute(Ue):n._df,(s=v.indexOf("/"+i+r)+1)&&(v=d._tkns.slice(0,g)+v.slice(s+(a?-1:i.length+1))),v&&(t?t.setAttribute(Ue,v):l(n,v))}else l(n,k(n._df,"#"+i+r)),a||t||l(n,k(n._df,"/"+i+r))}function O(e,t){var n,i,r,a;if(a=y(e,!0,gt))for(n=0,i=a.length;n<i;n++)r=a[n],"_"===r.ch?!(r=Se[r.id])||!r.type||t&&r._prv!==t&&r.parentElem!==t||r.parent.removeViews(r._.key,void 0,!0):L(r.id,void 0,t)}function R(e,t,n,i,a,o){var l=this,s=[];return l&&l._tgId&&(a=l),s[t||0]=e,i?setTimeout(function(){r(s,n,a,o)}):r(s,n,a,o),l}function $(){for(var e=arguments.length;e--;)this.tag.setValue(arguments[e],e,this.index)}function F(e){var n,i,a,o,d,v,u,_;if(e.contents=function(e,n){e!==!!e&&(n=e,e=void 0);var i,r=t(this.nodes());return r[0]&&(i=n?r.filter(n):r,r=e&&n?i.add(r.find(n)):i),r},e.nodes=function(e,t,n){var i,r=this.contentView||this,a=r._elCnt,o=!t&&a,l=[];if(!r.args)for(t=t||r._prv,n=n||r._nxt,i=o?t===r._nxt?r.parentElem.lastSibling:t:r.inline===!1?t||r.linkCtx.elem.firstChild:t&&t.nextSibling;i&&(!n||i!==n);)(e||a||i.tagName!==ze)&&l.push(i),i=i.nextSibling;return l},e.childTags=function(e,t){e!==!!e&&(t=e,e=void 0);var n=this.contentView||this,i=n.link?n:n.tagCtx.view,r=n._prv,a=n._elCnt,o=[];return n.args||i.link(void 0,n.parentElem,a?r&&r.previousSibling:r,n._nxt,void 0,{get:{tags:o,deep:e,name:t,id:n.link?n._.id+"_":n._tgId+"^"}}),o},"tag"===e._is){for(u=e,i=u.tagCtxs.length;i--;)a=u.tagCtxs[i],a.setValues=$,a.contents=e.contents,a.childTags=e.childTags,a.nodes=e.nodes;if(o=u.boundProps=u.boundProps||[],d=u.bindFrom)for(n=d.length;n--;)v=d[n],v+""===v&&(d[v]=1,Ct(v,o)<0&&o.push(v));u.setValue=de._gm(u.constructor.prototype.setValue||function(e){return e},function(e,i,r){i=i||0,r=r||0;var a,o,l,s,d,p,f=u.tagCtxs[r],c=u.base.call(u,e,i,r);if(void 0!==c&&(e=c),void 0!==e&&(u.convert||void 0===u._.toIndex[i])&&(l=u.linkedCtxParam)&&l[i]&&(s=l[i])&&f.ctxPrm(s,e),d=u._.toIndex[i],void 0!==d&&(p=f.linkedElems||u.linkedElem&&[u.linkedElem])&&(a=p[d])&&(n=a.length))for(;n--;)o=a[n],void 0===e||o._jsvChg||u.linkCtx._val===e||(void 0!==o.value?o.type===$e?o[Re]=e&&"false"!==e:o.type===Fe?o[Re]=o.value===e:Z(e)?o.value=e:t(o).val(e):o[o.contentEditable===Je?"innerHTML":Le]=e),f.props.name&&(o.name=o.name||f.props.name);return u}),u.updateValue=R,u.updateValues=function(){return r(arguments,void 0,this)},u.setValues=function(){return $.apply(u.tagCtx,arguments),u},u.refresh=function(){var e,t,n=u.linkCtx,i=u.tagCtx.view;if(t=P(u))return u.onUnbind&&(u.onUnbind(u.tagCtx,n,u.ctx),u._.unlinked=!0),e=u.inline?me:n.attr||f(u.parentElem,!0),t=":"===u.tagName?de._cnvt(u.convert,i,u.tagCtx):de._tag(u,i,i.tmpl,t,!0),g(n,n.data,n.elem),s(t,n,e,u),A(u),u},u.domChange=function(){var e=this.parentElem,n=t._data(e).events,i="jsv-domchange";n&&n[i]&&t(e).triggerHandler(i,arguments)}}else _=e,_.addViews=function(e,t){var n,i=this,r=t.length,a=i.views;!i._.useKey&&r&&(n=a.length+r,n===i.data.length&&c(i,e,i.tmpl,a,t,i.ctx)!==!1&&(i._.srt||i.fixIndex(e+r)))},_.removeViews=function(e,n,i,r){function a(e){var n,r,a,o,l,s,d=c[e];if(d&&d.link){if(n=d._.id,i||(s=d.nodes()),d.removeViews(void 0,void 0,!0),d.type=void 0,o=d._prv,l=d._nxt,a=d.parentElem,i||(d._elCnt&&D(o,l,a,n,"_"),t(s).remove()),!d._elCnt)try{o.parentNode.removeChild(o),l.parentNode.removeChild(l)}catch(f){}p(d);for(r in d._.bnds)L(r);delete Se[n]}}var o,l,s,d=this,f=!d._.useKey,c=d.views;if(f&&(s=c.length),void 0===e)if(f){for(o=s;o--;)a(o);d.views=[]}else{for(l in c)a(l);d.views={}}else if(void 0===n&&(f?n=1:(a(e),delete c[e])),f&&n&&(r||s-n===d.data.length)){for(o=e+n;o-- >e;)a(o);c.splice(e,n),d._.srt||d.fixIndex(e)}},_.moveViews=function(e,n,i){function r(e,t){return RegExp("^(.*)("+(t?"\\/":"#")+e._.id+"_.*)$").exec(t||e._prv.getAttribute(Ue))}function a(e,t){var n=e._prv;n.setAttribute(Ue,t),t.replace(_t,function(e,t,i,r){dt[r].linkCtx.tag[t?"_prv":"_nxt"]=n}),t.replace(ut,function(e,t,i,r){Se[r][t?"_prv":"_nxt"]=n})}var o,s,d,p=this,f=p._nxt,c=p.views,v=n<e,g=v?n:e,u=v?e:n,_=n,h=[],m=c.splice(e,i);for(n>c.length&&(n=c.length),c.splice.apply(c,[n,0].concat(m)),i=m.length,d=n+i,u+=i,_;_<d;_++)s=c[_],o=s.nodes(!0),h=p._elCnt?h.concat(o):h.concat(s._prv,o,s._nxt);if(h=t(h),d<c.length?h.insertBefore(c[d]._prv):f?h.insertBefore(f):h.appendTo(p.parentElem),p._elCnt){var x,b=v?g+i:u-i,k=(c[g-1],c[g]),C=c[b],y=c[u],E=r(k),w=r(C);a(k,w[1]+E[2]),y?(x=r(y),a(y,E[1]+x[2])):(c[u-1]._nxt=f,f?(x=r(p,f.getAttribute(Ue)),f.setAttribute(Ue,E[1]+x[2])):(x=r(p,p.parentElem._df),l(p.parentElem,E[1]+x[2]))),a(C,x[1]+w[2])}p.fixIndex(g)},_.refresh=function(){var e=this,t=e.parent;return t&&(c(e,e.index,e.tmpl,t.views,e.data,void 0,!0),p(e)),e},_.fixIndex=function(e){for(var t=this.views,n=t.length;e<n--;)t[n].index!==n&&Y(t[n]).setProperty("index",n)},_.link=m}function K(e,t,n){var i,r,a=e.options.props;if(z(e.propsArr,n.path,n.value,n.remove),void 0!==a.sort||void 0!==a.start||void 0!==a.end||void 0!==a.step||a.filter||a.reverse)e.update();else if("set"===n.change){for(i=e.tgt,r=i.length;r--&&i[r].key!==n.path;);r===-1?n.path&&!n.remove&&Y(i).insert({key:n.path,prop:n.value}):n.remove?Y(i).remove(r):Y(i[r]).setProperty("prop",n.value)}}function H(e,t,n){var i,r,a,o,l=e.src,s=n.change;if("set"===s)"prop"===n.path?Y(l).setProperty(t.target.key,n.value):(Y(l).removeProperty(n.oldValue),Y(l).setProperty(n.value,t.target.prop));else if("insert"===s||(o="remove"===s))for(i=n.items,r=i.length;r--;)(a=i[r].key)&&(z(e.propsArr,a,i[r].prop,o),o?(Y(l).removeProperty(a),delete l[a]):Y(l).setProperty(a,i[r].prop))}function z(e,t,n,i){for(var r=e.length;r--&&e[r].key!==t;);r===-1?t&&!i&&e.push({key:t,prop:n}):i&&e.splice(r,1)}function J(e){return bt.test(e)}var Q=t===!1;n=n||Q&&e.jsrender,t=t||e.jQuery;var W="v1.0.2",X="JsViews requires ";if(!t||!t.fn)throw X+"jQuery";n&&!n.fn&&n.views.sub._jq(t);var G,Y,Z=t.isArray,ee=t.views;if(!ee||!ee.map||ee.jsviews!==W)throw X+"JsRender "+W;var te,ne,ie,re,ae,oe,le=e.document,se=ee.settings,de=ee.sub,pe=de.settings,fe=de.extend,ce=t.isFunction,ve=(t.expando,ee.converters),ge=ee.tags,ue=pe.advanced,_e=de.propChng=de.propChng||"propertyChange",he=de.arrChng=de.arrChng||"arrayChange",me="html",xe="_ocp",be=de.syntaxErr,ke=/<(?!script)(\w+)[>\s]/,Ce=de._er,ye=de._err,Ee=/['"\\]/g;if(t.link)return t;pe.trigger=!0;var we,je,Ae,Te,Ie,Ve,Se,Ne,Pe,Be=window.navigator.userAgent,Le=void 0!==le.textContent?"textContent":"innerText",Ue="data-jsv",Me="change.jsv",qe="onBeforeChange",De="onAfterChange",Oe="onAfterCreate",Re="checked",$e="checkbox",Fe="radio",Ke="none",He="value",ze="SCRIPT",Je="true",Qe='"></script>',We='<script type="jsv',Xe=Ue+"-df",Ge="script,["+Ue+"]",Ye={value:"val",input:"val",html:me,text:"text"},Ze={from:He,to:He},et=0,tt=t.cleanData,nt=se.delimiters,it=le.createDocumentFragment(),rt=le.querySelector,at={ol:1,ul:1,table:1,tbody:1,thead:1,tfoot:1,tr:1,colgroup:1,dl:1,select:1,optgroup:1,svg:1,svg_ns:1},ot={tr:"table"},lt={br:1,img:1,input:1,hr:1,area:1,base:1,col:1,link:1,meta:1,command:1,embed:1,keygen:1,param:1,source:1,track:1,wbr:1},st={},dt={},pt=1,ft=/^#(view\.?)?/,ct=/((\/>)|<\/(\w+)>|)(\s*)([#\/]\d+(?:_|(\^)))`(\s*)(<\w+(?=[\s\/>]))?|\s*(?:(<\w+(?=[\s\/>]))|<\/(\w+)>(\s*)|(\/>)\s*|(>)|$)/g,vt=/(#)()(\d+)(_)/g,gt=/(#)()(\d+)([_^])/g,ut=/(?:(#)|(\/))(\d+)(_)/g,_t=/(?:(#)|(\/))(\d+)(\^)/g,ht=/(#)()(\d+)(\^)/g,mt=/(?:(#)|(\/))(\d+)([_^])([-+@\d]+)?/g,xt=/&(\d+)\+?/g,bt=/^[^.]*$/,kt=e.getComputedStyle,Ct=t.inArray;if(Be=Be.indexOf("MSIE ")>0||Be.indexOf("Trident/")>0,Y=t.observable,!Y)throw X+"JsObservable";return G=Y.observe,F(de.View.prototype),de.onStore.template=function(e,n,i){null===n?(delete t.link[e],delete t.render[e]):(n.link=_,e&&!i&&"jsvTmpl"!==e&&(t.render[e]=n,t.link[e]=function(){return _.apply(n,arguments)}))},de.viewInfos=y,(se.delimiters=function(){var e=nt.apply(0,arguments),t=pe.delimiters;return te=t[0].charAt(0),ne=t[0].charAt(1),ie=t[1].charAt(0),re=t[1].charAt(1),ae=t[2],je=new RegExp("(?:^|\\s*)([\\w-]*)(\\"+ae+")?(\\"+ne+de.rTag+"(:\\w*)?\\"+ie+")","g"),e})(),de.addSetting("trigger"),ve.merge=function(e){var t,n=this.linkCtx.elem.className,i=this.tagCtx.props.toggle;return i&&(t=i.replace(/[\\^$.|?*+()[{]/g,"\\$&"),t="(\\s(?="+t+"$)|(\\s)|^)("+t+"(\\s|$))",n=n.replace(new RegExp(t),"$2"),e=n+(e?(n&&" ")+i:"")),e},ge({on:{attr:Ke,bindTo:[],init:function(e){for(var n,i=this,r=0,a=e.args,o=a.length;r<o&&!ce(a[r]);r++);i._hi=o>r&&r+1,i.inline&&(de.rTmpl.exec(n=t.trim(e.tmpl.markup))||(i.template="<button>"+(n||e.params.args[r]||"noop")+"</button>"),i.attr=me)},onBind:function(){this.template&&(this.mainElem=this.contents("button"))},onAfterLink:function(e,n){var i,r,a,o=this,l=o._hi,s=e.args,d=s.length,p=e.props,f=p.data,c=e.view,v=p.context;l&&(i=s[l-1],r=s.slice(l),s=s.slice(0,l-1),o._sel=s[1],a=o.activeElem=o.activeElem||t(o.inline?(o._sel=s[1]||"*",o.parentElem):n.elem),v||(v=/^(.*)[.^][\w$]+$/.exec(e.params.args.slice(-r.length-1)[0]),v=v&&de.tmplFn(ne+":"+v[1]+ie,c.tmpl,!0)(n.data,c)),o._evs&&o.onUnbind(e,n,o.ctx),a.on(o._evs=s[0]||"click",o._sel,void 0==f?null:f,o._hlr=function(e){var t,a=!o.inline;if(!a)for(t=o.contents("*"),d=t.length;!a&&d--;)t[d].contains(e.target)&&(a=!0);if(a)return i.apply(v||n.data,[].concat(r,e,{change:e.type,view:c,linkCtx:n},r.slice.call(arguments,1)))}))},onUpdate:!1,onUnbind:function(){var e=this;e.activeElem&&(et=0,e.activeElem.off(e._evs,e._sel,e._hlr),et=et)},contentCtx:!0,setSize:!0,dataBoundOnly:!0},radiogroup:{boundProps:["disabled"],init:function(e){this.name=e.props.name||(Math.random()+"jsv").slice(9)},onBind:function(e,n){var i,r,a,o=this,l=e.params.props;for(l=l&&l.disabled,o.inline?(i=o.contents("*")[0],i=i&&Ae(i).ctx.tag===o.parent?i:o.parentElem,r=o.contents(!0,"input[type=radio]")):(i=n.elem,r=t("input[type=radio]",n.elem)),o.linkedElem=r,a=r.length;a--;)r[a].name=r[a].name||o.name;t(i).on("jsv-domchange",function(t,n){var s,d,p=n.ctx.parentTags;if(!o.inline||i!==o.parentElem||p&&p[o.tagName]===o){for(d=o.cvtArgs()[0],r=o.linkedElem=o.contents(!0,"input[type=radio]"),a=r.length;a--;)s=r[a],s._jsvLkEl=o,s.name=s.name||o.name,s._jsvBnd="&"+o._tgId+"+",s.checked=d===s.value,l&&(s.disabled=!!e.props.disabled);o.linkedElems=e.linkedElems=[r]}})},onAfterLink:function(e,t,n,i,r){var a=e.params.props;a&&a.disabled&&this.linkedElem.prop("disabled",!!e.props.disabled)},onUpdate:!1,contentCtx:!0,dataBoundOnly:!0}}),fe(ge["for"],{sortDataMap:ee.map({getTgt:ge["for"].sortDataMap.getTgt,obsSrc:function(e,t,n){e.update()},obsTgt:function(e,t,n){var i,r=n.items,a=e.src;if("remove"===n.change)for(i=r.length;i--;)Y(a).remove(Ct(r[i],a));else"insert"===n.change&&Y(a).insert(r)}}),mapProps:["filter","sort","reverse","start","end","step"],bindTo:["paged","sorted"],bindFrom:[0],onArrayChange:function(e,t,n,i){var r,a,o=e.target.length,l=this;if(!l.rendering)if(l._.noVws||l.tagCtxs[1]&&("insert"===t.change&&o===t.items.length||"remove"===t.change&&!o))a=n.map&&n.map.propsArr,l.refresh(),a&&(n.map.propsArr=a);else for(r in l._.arrVws)r=l._.arrVws[r],r.data===e.target&&d.apply(r,arguments);l.domChange(n,i,t),e.done=!0},onUpdate:function(e,t,n){for(var i,r,a=this,o=n.length;o--;)i=n[o],r=i.props,i.argDefault=void 0===r.end||i.args.length>0,r.dataMap=i.argDefault!==!1&&Z(i.args[0])&&(void 0!==r.sort||i.params.props.start||i.params.props.end||void 0!==r.step||r.filter||r.reverse)&&a.sortDataMap},onBind:function(e,t,n,i,r){for(var a,o=this,l=0,s=o._ars=o._ars||{},d=o.tagCtxs,p=d.length,f=o.selected||0;l<=f;l++)e=d[l],a=e.map?e.map.tgt:e.args.length?e.args[0]:e.view.data,s[l]&&(G(s[l],!0),
delete s[l]),!s[l]&&Z(a)&&!function(){var n=e;G(a,s[l]=function(e,i){o.onArrayChange(e,i,n,t)})}();for(l=f+1;l<p;l++)s[l]&&(G(s[l],!0),delete s[l]);r&&o.domChange(e,t,r)},onAfterLink:function(e){for(var n,i,r,a=this,o=0,l=a.tagCtxs,s=(l.length,a.selected||0);o<=s;o++)e=l[o],i=e.map,n=e.map?i.tgt:e.args.length?e.args[0]:e.view.data,Z(n)&&(r=e.params.props)&&(r.paged&&!a.paged&&(t.observable(a).setProperty("paged",n.slice()),a.updateValue(a.paged,0,o,!0)),r.sorted&&!a.sorted&&(t.observable(a).setProperty("sorted",i&&i.sorted||n.slice()),a.updateValue(a.sorted,1,o,!0)))},onDispose:function(){var e,t=this;for(e in t._ars)G(t._ars[e],!0)}}),fe(ge["if"],{onUpdate:function(e,t,n){for(var i,r,a=0;i=this.tagCtxs[a];a++)if(r=i.props.tmpl!==n[a].props.tmpl||i.args.length&&!(i=i.args[0])!=!n[a].args[0],!this.convert&&i||r)return r;return!1},onAfterLink:function(e,t,n,i,r){r&&this.domChange(e,t,r)}}),ge("props",{baseTag:"for",dataMap:ee.map({getTgt:ge.props.dataMap.getTgt,obsSrc:K,obsTgt:H,tgtFlt:J}),flow:!0}),fe(t,{view:Ae=function(e,n,i){function r(e,t){if(e)for(o=y(e,t,vt),s=0,d=o.length;s<d&&(!(a=Se[o[s].id])||!(a=a&&i?a.get(!0,i):a));s++);}n!==!!n&&(i=n,n=void 0);var a,o,l,s,d,p,f,c=0,v=le.body;if(e&&e!==v&&oe._.useKey>1&&(e=""+e===e?t(e)[0]:e.jquery?e[0]:e)){if(n){if(r(e._df,!0),!a&&e.tagName)for(f=rt?e.querySelectorAll(Ge):t(Ge,e).get(),p=f.length,l=0;!a&&l<p;l++)r(f[l]);return a}for(;e;){if(o=y(e,void 0,ut))for(p=o.length;p--;)if(a=o[p],a.open){if(c<1)return a=Se[a.id],a&&i?a.get(i):a||oe;c--}else c++;e=e.previousSibling||e.parentNode}}return oe},link:h,unlink:U,cleanData:function(e){e.length&&et&&B(e),tt.apply(t,arguments)}}),fe(t.fn,{link:function(e,t,n,i,r,a,o){return h(e,this,t,n,i,r,a,o)},unlink:function(){return U(this)},view:function(e,t){return Ae(this[0],e,t)}}),t.each([me,"replaceWith","empty","remove"],function(e,n){var i=t.fn[n];t.fn[n]=function(){var e;et=1;try{e=i.apply(this,arguments)}finally{et=0}return e}}),fe(oe=de.topView,{tmpl:{links:{}}}),Se={0:oe},de._glt=function(e){for(var t,n=/#(\d*)\^\/\1\^/g,i=[],r=C(e);t=n.exec(r);)(t=dt[t[1]])&&i.push(t.linkCtx.tag);return i},de._gccb=function(e){return function(t,n,i){var r,a,o,l,s,d,p,f,c,v,g;if(e&&t){if(t._cpfn)return t._cpfn.call(e.tmpl,n,e,de);if("~"===t.charAt(0)){if("~tag"===t.slice(0,4)&&(a=e.ctx,"."===t.charAt(4)?(r=t.slice(5),a=a.tag):"~tagCtx."===t.slice(0,8)&&(r=t.slice(8),a=a.tagCtx),r))return a?[a,r]:[];if(t=t.slice(1).split("."),l=e.ctxPrm(s=t.shift(),void 0,!0))if(f=l._cxp){if(t.length&&(d="."+t.join("."),s=l[p=l.length-1],s._cpfn?(s.sb=d,s.bnd=!!i):(l[p]=(s+d).replace("#data.",""),"#view"===s.slice(0,5)&&(l[p]=l[p].slice(6),l.splice(p,0,e)))),o=[l],(a=f.tag)&&a.convert)for(g=a.bindTo||[0],p=g.length;p--;)void 0!==i&&p!==f.ind&&(v=g[p],c=[l[0],a.tagCtx.params[+v===v?"args":"props"]],c._cxp=f,o.push(c))}else(t.length||ce(l))&&(o=[l,t.join(".")]);return o||[]}if("#"===t.charAt(0))return"#data"===t?[]:[e,t.replace(ft,"")]}}},de._cp=function(e,n,i,r){if(i.linked){if(r&&(r.cvt||void 0===r.tag._.toIndex[r.ind]))e=[{_ocp:e}],r.updateValue=function(n){return t.observable(e._cxp.data).setProperty(xe,n),this};else if(n){var a=ne+":"+n+ie,o=oe.tmpl.links,l=o[a];l||(o[a]=l=de.tmplFn(a,i.tmpl,!0)),e=l.deps[0]?[i,l]:[{_ocp:r?e:l()}]}else e=[{_ocp:e}];e._cxp=r||{updateValue:function(t){return Y(e._cxp.data).setProperty(e._cxp.path,t),this}}}return e},de._ucp=function(e,t,n,i){var r=i.tag,a=r?Ct(e,r.linkedCtxParam):0;return i.path||N("~"+e,n.data,de._gccb(n)),(i.updateValue||r.updateValue)(t,a,i.tagElse,void 0,r)},de._ceo=function yt(e){for(var t,n=[],i=e.length;i--;)t=e[i],t._cpfn&&(t=fe({},t),t.prm=yt(t.prm)),n.unshift(t);return n},Ne=de.advSet,de.advSet=function(){Ne.call(de),e._jsv=ue._jsv?fe(e._jsv||{},{views:Se,bindings:dt}):void 0,Te=ue.linkAttr,Ie=Ge+",["+Te+"]",Ve=ue._wm,Ve.optgroup=Ve.option,Ve.tbody=Ve.tfoot=Ve.colgroup=Ve.caption=Ve.thead,Ve.th=Ve.td},se.advanced({linkAttr:"data-link",useViews:!1,noValidate:!1,_wm:{option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],svg_ns:[1,"<svg>","</svg>"],div:t.support.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},_fe:{input:{from:M,to:He},textarea:Ze,select:Ze,optgroup:{to:"label"}}}),t},window);
//# sourceMappingURL=jquery.views.min.js.map
