/*! JsObservable v1.0.7: http://jsviews.com/#jsobservable */
!function(t,e){var n=e.jQuery;"object"==typeof exports?module.exports=n?t(e,n):function(n){return t(e,n)}:"function"==typeof define&&define.amd?define(["jquery"],function(n){return t(e,n)}):t(e,!1)}(function(t,e){"use strict";var n=e===!1;if(e=e||t.jQuery,!e||!e.fn)throw"jquery.observable.js requires jQuery";var r,i,o="v1.0.7",s=e.views=e.views||n&&t.jsrender&&jsrender.views||{jsviews:o,sub:{settings:{}},settings:{advanced:function(t){return l=c.advanced=c.advanced||{_jsv:!0},t?("_jsv"in t&&(l._jsv=t._jsv),a.advSet(),s.settings):l}}},a=s.sub,c=a.settings,l=c.advanced,f=e.isFunction,p=e.expando,u=e.isArray,h="object";if(s.jsviews!==o)throw"jquery.observable.js requires jsrender.js "+o;if(!e.observe){var d=e.event.special,v=[].slice,_=[].splice,g=[].concat,b=parseInt,y=/\S+/g,m=/^[^.[]*$/,I=a.propChng=a.propChng||"propertyChange",w=a.arrChng=a.arrChng||"arrayChange",j={},x=I+".observe",A=1,k=1,C=1,F=e.data,P={},S=[],T=function(t){return t?t._cId=t._cId||".obs"+k++:""},V=function(t,e){return this._data=e,this._ns=t,this},q=function(t,e){return this._data=e,this._ns=t,this},D=function(t){return u(t)?[t]:t},O=function(t,e,n){t=t?u(t)?t:[t]:[];var r,i,o,s,a=o=e,c=t&&t.length,l=[];for(r=0;r<c;r++)i=t[r],f(i)?(s=e.tagName?e.linkCtx.data:e,l=l.concat(O(i.call(e,s,n),s,n))):""+i===i?(a!==o&&l.push(o=a),l.push(i)):(e=a=i=void 0===i?null:i,a!==o&&l.push(o=a));return l.length&&(l.unshift({_ar:1}),l.push({_ar:-1})),l},H=function(t,e){function n(t){return typeof t===h&&(d[0]||!p&&u(t))}if(!t.data||!t.data.off){var r,i,o,s=e.oldValue,a=e.value,c=t.data,l=c.observeAll,f=c.cb,p=c._arOk?0:1,d=c.paths,v=c.ns;t.type===w?(f.array||f).call(c,t,e):c.prop!==e.path&&"*"!==c.prop||(l?(r=l._path+"."+e.path,i=l.filter,o=[t.target].concat(l.parents()),n(s)&&Q(void 0,v,[s],d,f,!0,i,[o],r),n(a)&&Q(void 0,v,[a],d,f,void 0,i,[o],r)):(n(s)&&Q(p,v,[s],d,f,!0),n(a)&&Q(p,v,[a],d,f)),c.cb(t,e))}},Q=function(){var t=g.apply([],arguments);return r.apply(t.shift(),t)},M=function(t,e,n){N(this._ns,this._data,t,e,[],"root",n)},B=function(t,e){M.call(this,t,e,!0)},N=function(t,n,o,s,a,c,l,f){function d(t,e){for(g=t.length,y=c+"[]";g--;)v(t,g,e,1)}function v(e,n,r,a){var c,l;+n!==n&&n===p||!(c=i._fltr(y,e[n],m,s))||(l=m.slice(),a&&I&&l[0]!==I&&l.unshift(I),N(t,c,o,s||(a?void 0:0),l,y,r,f))}function _(t,e){switch(c=t.data.observeAll._path,I=t.target,e.change){case"insert":d(e.items);break;case"remove":d(e.items,!0);break;case"set":y=c+"."+e.path,v(e,"oldValue",!0),v(e,"value")}I=void 0,o.apply(this,arguments)}_._wrp=1;var g,b,y,m,I,w,j=!f||f.un||!l;if(n&&typeof n===h){if(m=[n].concat(a),b=u(n)?"":"*",f&&j&&e.hasData(n)&&f[w=F(n).obId])return void f[w]++;if(f||(f={un:l}),o){if(b||0!==s)if(_._cId=T(o),j)r(t,n,b,_,l,s,m,c),w=F(n).obId,f[w]=(f[w]||0)+1;else{if(--f[F(n).obId])return;r(t,n,b,_,l,s,m,c)}}else f&&(f[F(n).obId]=1),r(t,n,b,void 0,l,s,m,c);if(b)for(g in n)y=c+"."+g,v(n,g,l);else d(n,l)}},$=function(t){return m.test(t)},z=function(){return[].push.call(arguments,!0),r.apply(void 0,arguments)},E=function(t){var e,n=this.slice();for(this.length=0,this._go=0;e=n.shift();)e.skip||e[0]._trigger(e[1],e[2],!0);this.paths={}};r=function(){function t(){function s(t,e){var n;for(V in e)n=e[V],u(n)?l(t,n,m,m):c(t,n,void 0,U,"")}function c(t,r,i,s,a,c,l){var f,p,u,h=D(r),d=N,v=$;if(s=n?s+"."+n:s,!m&&(l||c))for(L=e._data(r).events,L=L&&L[c?w:I],R=L&&L.length;R--;)if(V=L[R]&&L[R].data,V&&(l&&V.ns!==n||!l&&V.ns===n&&V.cb&&V.cb._cId===t._cId&&(!t._wrp||V.cb._wrp)))return;m||l?e(h).off(s,H):(p=c?{}:{fullPath:i,paths:a?[a]:[],prop:K,_arOk:o},p.ns=n,p.cb=t,$&&(p.observeAll={_path:v,path:function(){return f=d.length,v.replace(/[[.]/g,function(t){return f--,"["===t?"["+e.inArray(d[f-1],d[f]):"."})},parents:function(){return d},filter:z}),e(h).on(s,null,p,H),M&&(u=F(r),u=u.obId||(u.obId=A++),M[u]=M[u]||(M.len++,r)))}function l(t,e,n,r,s){if(o){var a,l=$;a=e,s&&(a=e[s],$=$?$+"."+s:$),z&&a&&(a=i._fltr($,a,s?[e].concat(N):N,z)),a&&(r||u(a))&&c(t,a,void 0,w+".observe"+T(t),void 0,!0,n),$=l}}function d(i){function s(i,v,_,y){function j(e){return e.ob=y(e),e.cb=function(n,r){var i=e.ob,s=e.sb,a=y(e);a!==i&&(typeof i===h&&(l(_,i,!0),(s||o&&u(i))&&t([i],s,_,y,!0)),e.ob=a,typeof a===h&&(l(_,a),(s||o&&u(a))&&t([a],s,_,y))),_(n,r)}}function x(t,i){function a(t,e){var n;if("insert"===e.change||(m="remove"===e.change)){for(n=e.items.length;n--;)x(e.items[n],i.slice());m=!1}}_&&(a._cId=T(_));var v,b,j,A,C,P,S,q=t;if(t&&t._cxp)return s(t[0],[t[1]],_,y);for(;void 0!==(K=i.shift());){if(q&&typeof q===h&&""+K===K){if(""===K)continue;if("()"===K.slice(-2)&&(K=K.slice(0,-2),S=!0),i.length<F+1&&!q.nodeType){if(!m&&(L=e._data(q).events)){for(L=L&&L[I],R=L&&L.length,b=0;R--;)V=L[R].data,!V||V.ns!==n||V.cb._cId!==_._cId||V.cb._inId!==_._inId||!V._arOk!=!o||V.prop!==K&&"*"!==V.prop&&"**"!==V.prop||((C=i.join("."))&&V.paths.push(C),b++);if(b){q=q[K];continue}}if("*"===K||"**"===K){if(!m&&L&&L.length&&c(_,q,k,U,"",!1,!0),"*"===K){c(_,q,k,U,"");for(C in q)C!==p&&l(_,q,m,void 0,C)}else e.observable(n,q)[(m?"un":"")+"observeAll"](_);break}"[]"==K?u(q)&&(m?c(_,q,k,w+T(_),void 0,m,m):r(n,q,a,m)):K&&c(_,q,k,U+".p_"+K,i.join("^"))}if($&&($+="."+K),"[]"===K){for(u(q)&&(A=q,v=q.length);v--;)q=A[v],x(q,i.slice());return}K=q[K],i[0]||l(_,K,m)}if(f(K)&&(P=K,(j=P.depends)&&(q._vw&&q._ocp&&(q=q._vw,q._tgId&&(q=q.tagCtx.view),q=q.data),d(g.apply([],[[q],O(j,q,_)]))),S)){if(!i[0]){l(_,P.call(q),m);break}if(K=P.call(q),!K)break}q=K}}var A,k,F=0,P=v.length;for(!i||y||!(J="view"===i._is)&&"tag"!==i._is||(y=a._gccb(J?i:i.tagCtx.contentView),_&&!m&&!function(){var t=i,e=_;_=function(n,r){e.call(t,n,r)},_._cId=e._cId,_._inId=e._inId}(),i=J?i.data:i),v[0]||(u(i)?l(_,i,m,!0):m&&c(_,i,void 0,U,"")),A=0;A<P;A++)if(k=v[A],""!==k)if(k&&k._ar)o+=k._ar;else if(""+k===k)if(b=k.split("^"),b[1]&&(F=b[0].split(".").length,k=b.join("."),F=k.split(".").length-F),y&&(Q=y(k,F))){if(Q.length){var S=Q[0],q=Q[1];if(S&&S._cxp&&(q=S[1],S=S[0],"view"===S._is)){s(S,[q],_);continue}q+""===q?x(S,q.split(".")):s(Q.shift(),Q,_,y)}}else x(i,k.split("."));else!f(k)&&k&&k._cpfn&&(B=m?k.cb:j(k),B._cId=_._cId,B._inId=B._inId||".obIn"+C++,(k.bnd||k.prm&&k.prm.length||!k.sb)&&t([i],k.path,k.prm.length?[k.root||i]:[],k.prm,B,y,m),k.sb&&(k.sb.prm&&(k.sb.root=i),s(k.ob,[k.sb],_,y)))}for(var v,_=[],y=i.length;y--;)v=i[y],v+""===v||v&&(v._ar||v._cpfn)?_.unshift(v):(s(v,_,k,q),_=[])}var _,b,m,k,P,S,V,q,Q,M,B,N,$,z,E,G,J,K,L,R,U=x,W=1!=this?g.apply([],arguments):v.call(arguments),X=W.pop()||!1,Y=W.length;if(X+""===X&&($=X,N=W.pop(),z=W.pop(),X=!!W.pop(),Y-=3),X===!!X&&(m=X,X=W[Y-1],X=!Y||X+""===X||X&&!f(X)?void 0:(Y--,W.pop()),m&&!Y&&f(W[0])&&(X=W.shift())),k=X,Y&&f(W[Y-1])&&(q=k,X=k=W.pop(),Y--),!m||!k||k._cId){for(U+=k?(S=k._inId||"",m?k._cId+S:(P=T(k))+S):"",P&&!m&&(M=j[P]=j[P]||{len:0}),E=n&&n.match(y)||[""],G=E.length;G--;){if(n=E[G],m&&arguments.length<3)if(k)s(k,j[k._cId]);else if(!W[0])for(_ in j)s(k,j[_]);d(W)}return P&&!M.len&&delete j[P],{cbId:P,bnd:M,s:j}}}var n,o=1==this?0:1,s=v.call(arguments),c=s[0];return c+""===c&&(n=c,s.shift()),t.apply(1,s)},S.wait=function(){var t=this;t._go=1,setTimeout(function(){t.trigger(!0),t._go=0,t.paths={}})},i=function(t,e,n){t+""!==t&&(n=e,e=t,t=""),n=void 0===n?l.asyncObserve:n;var r=u(e)?new q(t,e):new V(t,e);return n&&(n===!0&&(r.async=!0,n=S),n.trigger||(u(n)?(n.trigger=E,n.paths={}):n=void 0),r._batch=n),r},e.observable=i,i._fltr=function(t,e,n,r){if(!r||!f(r)||r(t,e,n))return e=f(e)?e.set&&e.call(n[0]):e,typeof e===h&&e},i.Object=V,i.Array=q,e.observe=i.observe=r,e.unobserve=i.unobserve=z,i._apply=Q,V.prototype={_data:null,observeAll:M,unobserveAll:B,data:function(){return this._data},setProperty:function(t,e,n){t=t||"";var r,i,o,s,a=t+""!==t,c=this,l=c._data,f=c._batch;if(l)if(a)if(n=e,u(t))for(r=t.length;r--;)i=t[r],c.setProperty(i.name,i.value,void 0===n||n);else{f||(c._batch=s=[],s.trigger=E,s.paths={});for(r in t)c.setProperty(r,t[r],n);s&&(c._batch.trigger(),c._batch=void 0)}else if(t!==p){for(o=t.split(/[.^]/);l&&o.length>1;)l=l[o.shift()];l&&c._setProperty(l,o[0],e,n)}return c},removeProperty:function(t){return this.setProperty(t,P),this},_setProperty:function(t,e,n,r){var i,o,s,a,c,l=e?t[e]:t;(l!==n||r&&l!=n)&&(f(l)&&l.set&&(c=t._vw||t,o=l,i=o.set===!0?o:o.set,l=o.call(c)),(!(l instanceof Date&&n instanceof Date)||l>n||l<n)&&(i?(i.call(c,n),n=o.call(c)):(s=n===P)?void 0!==l?(delete t[e],n=void 0):e=void 0:e&&(t[e]=n),e&&(a={change:"set",path:e,value:n,oldValue:l,remove:s},t._ocp&&(a.ctxPrm=t._key),this._trigger(t,a))))},_trigger:function(t,n,r){c._cchCt++;var i,o,s,a=this;e.hasData(t)&&(!r&&(o=a._batch)?(a.async&&!o._go&&o.wait(),o.push([a,t,n]),i=F(t).obId+n.path,(s=o.paths[i])&&(o[s-1].skip=1),o.paths[i]=o.length):(e(t).triggerHandler(I+(this._ns?"."+/^\S+/.exec(this._ns)[0]:""),n),n.oldValue=null))}},q.prototype={_data:null,observeAll:M,unobserveAll:B,data:function(){return this._data},insert:function(t,e){var n=this._data;return 1===arguments.length&&(e=t,t=n.length),t=b(t),t>-1&&(e=u(e)?e:[e],e.length&&this._insert(t,e)),this},_insert:function(t,e){var n=this._data,r=n.length;t>r&&(t=r),_.apply(n,[t,0].concat(e)),this._trigger({change:"insert",index:t,items:e},r)},remove:function(t,e){var n,r=this._data;return void 0===t&&(t=r.length-1),t=b(t),e=e?b(e):0===e?0:1,e>0&&t>-1&&(n=r.slice(t,t+e),(e=n.length)&&this._remove(t,e,n)),this},_remove:function(t,e,n){var r=this._data,i=r.length;r.splice(t,e),this._trigger({change:"remove",index:t,items:n},i)},move:function(t,e,n){return n=n?b(n):0===n?0:1,t=b(t),e=b(e),n>0&&t>-1&&e>-1&&t!==e&&this._move(t,e,n),this},_move:function(t,e,n){var r,i=this._data,o=i.length,s=t+n-o;s>0&&(n-=s),n&&(r=i.splice(t,n),e>i.length&&(e=i.length),_.apply(i,[e,0].concat(r)),e!==t&&this._trigger({change:"move",oldIndex:t,index:e,items:r},o))},refresh:function(t){function e(){i&&(a.insert(r-i,c),u+=i,n+=i,i=0,c=[])}var n,r,i,o,s,a=this,c=[],l=a._data,f=l.slice(),p=l.length,u=p,h=t.length;for(a._srt=!0,r=i=0;r<h;r++)if((o=t[r])===l[r-i])e();else{for(n=r-i;n<u&&o!==l[n];n++);if(n<u){for(e(),s=0;s++<h-n&&t[r+s]===l[n+s];);a.move(n,r,s),r+=s-1}else i++,c.push(o)}return e(),u>r&&a.remove(r,u-r),a._srt=void 0,(p||h)&&a._trigger({change:"refresh",oldItems:f},p),a},_trigger:function(t,n,r){c._cchCt++;var i,o,s,a=this;e.hasData(o=a._data)&&(!r&&(s=a._batch)?(t._dly=!0,s.push([a,t,n]),a.async&&!s._go&&s.wait()):(i=o.length,o=e([o]),a._srt?t.refresh=!0:i!==n&&o.triggerHandler(I,{change:"set",path:"length",value:i,oldValue:n}),o.triggerHandler(w+(a._ns?"."+/^\S+/.exec(a._ns)[0]:""),t)))}},d[I]=d[w]={remove:function(t){var n,r,i,o,s,a=t.data;if(a&&(a.off=!0,a=a.cb)&&(n=j[a._cId])){for(i=e._data(this).events[t.type],o=i.length;o--&&!r;)r=(s=i[o].data)&&s.cb&&s.cb._cId===a._cId;r||(--n.len?delete n[F(this).obId]:delete j[a._cId])}}},s.map=function(t){function n(e,n,r,o){var s,a,c=this;c.src&&c.unmap(),n&&(n.map=c),(typeof e===h||f(e))&&(c.src=e,o?c.tgt=t.getTgt(e,n):(r&&(c.tgt=r.tgt||u(r)&&r),c.tgt=c.tgt||[],c.options=n||c.options,(a=c.update())?c=a:(t.obsSrc&&i(c.src).observeAll(c.obs=function(e,n){s||n.refresh||(s=!0,t.obsSrc(c,e,n),s=void 0)},c.srcFlt),t.obsTgt&&i(c.tgt).observeAll(c.obt=function(e,n){s||c.tgt._updt||(s=!0,t.obsTgt(c,e,n),s=void 0)},c.tgtFlt))))}return f(t)&&(t={getTgt:t}),t.baseMap&&(t=e.extend({},t.baseMap,t)),t.map=function(t,e,r,i){return new n(t,e,r,i)},(n.prototype={srcFlt:t.srcFlt||$,tgtFlt:t.tgtFlt||$,update:function(e){var n,r,o=this,s=o.tgt;if(!s._updt&&(s._updt=!0,n=o.options&&o.options.map,i(s).refresh(t.getTgt(o.src,o.options=e||o.options)),s._updt=!1,r=o.options&&o.options.map,r&&n!==r))return r},observe:function(t,n){var r=this,o=r.options;r.obmp&&z(r.obmp),r.obmp=function(){var t=n.fn(n.data,n.view,a)[o.index];e.extend(o.props,t.props),o.args=t.args,r.update()},i._apply(1,n.data,O(t,n.tag,r.obmp),r.obmp,n._ctxCb)},unmap:function(){var t=this;t.src&&t.obs&&i(t.src).unobserveAll(t.obs,t.srcFlt),t.tgt&&t.obt&&i(t.tgt).unobserveAll(t.obt,t.tgtFlt),t.obmp&&z(t.obmp),t.src=void 0},map:n,_def:t}).constructor=n,t},a.advSet=function(){a=this,l=c.advanced,t._jsv=l._jsv?{cbBindings:j}:void 0},a._dp=O,a._gck=T,a._obs=r,c._cchCt=0,l=c.advanced=l||{useViews:!1,_jsv:!1}}return e},window);
//# sourceMappingURL=jquery.observable.min.js.map
