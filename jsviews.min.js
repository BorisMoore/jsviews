/*! jsviews.js v0.9.75 (Beta) single-file version: http://jsviews.com/ */
/*! includes JsRender, JsObservable and JsViews - see: http://jsviews.com/#download */
!function(e,t){var n=t.jQuery;"object"==typeof exports?module.exports=n?e(t,n):function(n){return e(t,n)}:"function"==typeof define&&define.amd?define(["jquery"],function(n){return e(t,n)}):e(t,!1)}(function(e,t){"use strict";function n(e,t){return function(){var n,r=this,i=r.base;return r.base=e,n=t.apply(r,arguments),r.base=i,n}}function r(e,t){return Fe(t)&&(t=n(e?e._d?e:n(o,e):o,t),t._d=1),t}function i(e,t){for(var n in t.props)ft.test(n)&&(e[n]=r(e[n],t.props[n]))}function a(e){return e}function o(){return""}function s(e){try{throw console.log("JsRender dbg breakpoint: "+e),"dbg breakpoint"}catch(t){}return this.base?this.baseApply(arguments):e}function l(e){this.name=(t.link?"JsViews":"JsRender")+" Error",this.message=e||this.name}function d(e,t){var n;for(n in t)e[n]=t[n];return e}function c(e,t,n){return e?(Ke.delimiters=[e,t,Ze=n?n.charAt(0):Ze],ze=e.charAt(0),Qe=e.charAt(1),We=t.charAt(0),Xe=t.charAt(1),e="\\"+ze+"(\\"+Ze+")?\\"+Qe,t="\\"+We+"\\"+Xe,Ve="(?:(\\w+(?=[\\/\\s\\"+We+"]))|(\\w+)?(:)|(>)|(\\*))\\s*((?:[^\\"+We+"]|\\"+We+"(?!\\"+Xe+"))*?)",qe.rTag="(?:"+Ve+")",Ve=new RegExp("(?:"+e+Ve+"(\\/)?|\\"+ze+"(\\"+Ze+")?\\"+Qe+"(?:(?:\\/(\\w+))\\s*|!--[\\s\\S]*?--))"+t,"g"),Ne=new RegExp("<.*>|([^\\\\]|^)[{}]|"+e+".*"+t),Je):Ke.delimiters}function f(e,t){t||e===!0||(t=e,e=void 0);var n,r,i,a,o=this,s=!t||"root"===t;if(e){if(a=t&&o.type===t&&o,!a)if(n=o.views,o._.useKey){for(r in n)if(a=t?n[r].get(e,t):n[r])break}else for(r=0,i=n.length;!a&&i>r;r++)a=t?n[r].get(e,t):n[r]}else if(s)for(;o.parent;)a=o,o=o.parent;else for(;o&&!a;)a=o.type===t?o:void 0,o=o.parent;return a}function p(){var e=this.get("item");return e?e.index:void 0}function u(){return this.index}function v(t){var n,r=this,i=r.linkCtx,a=(r.ctx||{})[t];return void 0===a&&i&&i.ctx&&(a=i.ctx[t]),void 0===a&&(a=De[t]),a&&Fe(a)&&!a._wrp&&(n=function(){return a.apply(this&&this!==e?this:r,arguments)},n._wrp=r,d(n,a)),n||a}function g(e){return e&&(e.fn?e:this.getRsc("templates",e)||Pe(e))}function h(e,t,n,r){var a,o,s="number"==typeof n&&t.tmpl.bnds[n-1],l=t.linkCtx;return void 0!==r?n=r={props:{},args:[r]}:s&&(n=s(t.data,t,qe)),o=n.args[0],(e||s)&&(a=l&&l.tag,a||(a=d(new qe._tg,{_:{inline:!l,bnd:s,unlinked:!0},tagName:":",cvt:e,flow:!0,tagCtx:n}),l&&(l.tag=a,a.linkCtx=l),n.ctx=O(n.ctx,(l?l.view:t).ctx)),a._er=r&&o,i(a,n),n.view=t,a.ctx=n.ctx||{},n.ctx=void 0,o=a.cvtArgs(a.convert||"true"!==e&&e)[0],o=s&&t._.onRender?t._.onRender(o,t,a):o),void 0!=o?o:""}function _(e){var t=this,n=t.tagCtx,r=n.view,i=n.args;return e=t.convert||e,e=e&&(""+e===e?r.getRsc("converters",e)||N("Unknown converter: '"+e+"'"):e),i=i.length||n.index?e?i.slice():i:[r.data],e&&(e.depends&&(t.depends=qe.getDeps(t.depends,t,e.depends,e)),i[0]=e.apply(t,i)),i}function m(e,t){for(var n,r,i=this;void 0===n&&i;)r=i.tmpl&&i.tmpl[e],n=r&&r[t],i=i.parent;return n||Be[e][t]}function b(e,t,n,r,a,o){t=t||Le;var s,l,d,c,f,p,u,v,g,h,_,m,b,x,w,y,k,C,j,A="",I=t.linkCtx||0,E=t.ctx,S=n||t.tmpl,V="number"==typeof r&&t.tmpl.bnds[r-1];for("tag"===e._is?(s=e,e=s.tagName,r=s.tagCtxs,d=s.template):(l=t.getRsc("tags",e)||N("Unknown tag: {{"+e+"}} "),d=l.template),void 0!==o?(A+=o,r=o=[{props:{},args:[]}]):V&&(r=V(t.data,t,qe)),v=r.length,u=0;v>u;u++)h=r[u],(!I||!I.tag||u&&!I.tag._.inline||s._er)&&((m=S.tmpls&&h.tmpl)&&(m=h.content=S.tmpls[m-1]),h.index=u,h.tmpl=m,h.render=T,h.view=t,h.ctx=O(h.ctx,E)),(n=h.props.tmpl)&&(h.tmpl=t.getTmpl(n)),s||(s=new l._ctr,b=!!s.init,s.parent=p=E&&E.tag,s.tagCtxs=r,j=s.dataMap,I&&(s._.inline=!1,I.tag=s,s.linkCtx=I),(s._.bnd=V||I.fn)?s._.arrVws={}:s.dataBoundOnly&&N("{^{"+e+"}} tag must be data-bound")),r=s.tagCtxs,j=s.dataMap,h.tag=s,j&&r&&(h.map=r[u].map),s.flow||(_=h.ctx=h.ctx||{},c=s.parents=_.parentTags=E&&O(_.parentTags,E.parentTags)||{},p&&(c[p.tagName]=p),c[s.tagName]=_.tag=s);if(!(s._er=o)){for(i(s,r[0]),s.rendering={},u=0;v>u;u++)h=s.tagCtx=r[u],k=h.props,y=s.cvtArgs(),(x=k.dataMap||j)&&(y.length||k.dataMap)&&(w=h.map,(!w||w.src!==y[0]||a)&&(w&&w.src&&w.unmap(),w=h.map=x.map(y[0],k,void 0,!s._.bnd)),y=[w.tgt]),s.ctx=h.ctx,u||(b&&(C=s.template,s.init(h,I,s.ctx),b=void 0),I&&(I.attr=s.attr=I.attr||s.attr),f=s.attr,s._.noVws=f&&f!==gt),g=void 0,s.render&&(g=s.render.apply(s,y)),y.length||(y=[t]),void 0===g&&(g=h.render(y[0],!0)||(a?void 0:"")),A=A?A+(g||""):g;s.rendering=void 0}return s.tagCtx=r[0],s.ctx=s.tagCtx.ctx,s._.noVws&&s._.inline&&(A="text"===f?Oe.html(A):""),V&&t._.onRender?t._.onRender(A,t,s):A}function x(e,t,n,r,i,a,o,s){var l,d,c,f=this,u="array"===t;f.content=s,f.views=u?[]:{},f.parent=n,f.type=t||"top",f.data=r,f.tmpl=i,c=f._={key:0,useKey:u?0:1,id:""+ut++,onRender:o,bnds:{}},f.linked=!!o,n?(l=n.views,d=n._,d.useKey?(l[c.key="_"+d.useKey++]=f,f.index=bt,f.getIndex=p):l.length===(c.key=f.index=a)?l.push(f):l.splice(a,0,f),f.ctx=e||n.ctx):f.ctx=e}function w(e){var t,n,r,i,a,o,s;for(t in kt)if(a=kt[t],(o=a.compile)&&(n=e[t+"s"]))for(r in n)i=n[r]=o(r,n[r],e,0),i._is=t,i&&(s=qe.onStore[t])&&s(r,i,o)}function y(e,t,n){function i(){var t=this;t._={inline:!0,unlinked:!0},t.tagName=e}var a,o,s,l=new qe._tg;if(Fe(t)?t={depends:t.depends,render:t}:""+t===t&&(t={template:t}),o=t.baseTag){t.flow=!!t.flow,t.baseTag=o=""+o===o?n&&n.tags[o]||Ue[o]:o,l=d(l,o);for(s in t)l[s]=r(o[s],t[s])}else l=d(l,t);return void 0!==(a=l.template)&&(l.template=""+a===a?Pe[a]||Pe(a):a),l.init!==!1&&((i.prototype=l).constructor=l._ctr=i),n&&(l._parentTmpl=n),l}function k(e){return this.base.apply(this,e)}function C(e,n,r,i){function a(n){var a,s;if(""+n===n||n.nodeType>0&&(o=n)){if(!o)if(/^\.\/[^\\:*?"<>]*$/.test(n))(s=Pe[e=e||n])?n=s:o=document.getElementById(n);else if(t.fn&&!Ne.test(n))try{o=t(document).find(n)[0]}catch(l){}o&&(i?n=o.innerHTML:(a=o.getAttribute(_t),a?a!==mt?(n=Pe[a],delete Pe[a]):t.fn&&(n=t.data(o)[mt]):(e=e||(t.fn?mt:n),n=C(e,o.innerHTML,r,i)),n.tmplName=e=e||a,e!==mt&&(Pe[e]=n),o.setAttribute(_t,e),t.fn&&t.data(o,mt,n))),o=void 0}else n.fn||(n=void 0);return n}var o,s,l=n=n||"";return 0===i&&(i=void 0,l=a(l)),i=i||(n.markup?n:{}),i.tmplName=e,r&&(i._parentTmpl=r),!l&&n.markup&&(l=a(n.markup))&&l.fn&&(l=l.markup),void 0!==l?(l.fn||n.fn?l.fn&&(s=l):(n=A(l,i),B(l.replace(at,"\\$&"),n)),s||(w(i),s=d(function(){return n.render.apply(n,arguments)},n)),e&&!r&&e!==mt&&(xt[e]=s),s):void 0}function j(e){function t(t,n){this.tgt=e.getTgt(t,n)}return Fe(e)&&(e={getTgt:e}),e.baseMap&&(e=d(d({},e.baseMap),e)),e.map=function(e,n){return new t(e,n)},e}function A(e,n){var r,i=He._wm||{},a=d({tmpls:[],links:{},bnds:[],_is:"template",render:T},n);return a.markup=e,n.htmlTag||(r=lt.exec(e),a.htmlTag=r?r[1].toLowerCase():""),r=i[a.htmlTag],r&&r!==i.div&&(a.markup=t.trim(a.markup)),a}function I(e,t){function n(i,a,o){var s,l,d,c;if(i&&typeof i===ht&&!i.nodeType&&!i.markup&&!i.getTgt){for(d in i)n(d,i[d],a);return Be}return void 0===a&&(a=i,i=void 0),i&&""+i!==i&&(o=a,a=i,i=void 0),c=o?o[r]=o[r]||{}:n,l=t.compile,null===a?i&&delete c[i]:(a=l?l.call(c,i,a,o,0):a,i&&(c[i]=a)),l&&a&&(a._is=e),a&&(s=qe.onStore[e])&&s(i,a,l),a}var r=e+"s";Be[r]=n}function E(e){Je[e]=function(t){return arguments.length?(Ke[e]=t,Je):Ke[e]}}function T(e,t,n,r,i,a){var o,s,l,d,c,f,p,u,v=r,g="";if(t===!0?(n=t,t=void 0):typeof t!==ht&&(t=void 0),(l=this.tag)?(c=this,v=v||c.view,d=v.getTmpl(l.template||c.tmpl),arguments.length||(e=v)):d=this,d){if(!v&&e&&"view"===e._is&&(v=e),v&&e===v&&(e=v.data),f=!v,Ye=Ye||f,v||((t=t||{}).root=e),!Ye||He.useViews||d.useViews||v&&v!==Le)g=S(d,e,t,n,v,i,a,l);else{if(v?(p=v.data,u=v.index,v.index=bt):(v=Le,v.data=e,v.ctx=t),Me(e)&&!n)for(o=0,s=e.length;s>o;o++)v.index=o,v.data=e[o],g+=d.fn(e[o],v,qe);else v.data=e,g+=d.fn(e,v,qe);v.data=p,v.index=u}f&&(Ye=void 0)}return g}function S(e,t,n,r,i,a,o,s){function l(e){w=d({},n),w[b]=e}var c,f,p,u,v,g,h,_,m,b,w,y,k="";if(s&&(m=s.tagName,y=s.tagCtx,n=n?O(n,s.ctx):s.ctx,e===i.content?h=e!==i.ctx._wrp?i.ctx._wrp:void 0:e!==y.content?e===s.template?(h=y.tmpl,n._wrp=y.content):h=y.content||i.content:h=i.content,y.props.link===!1&&(n=n||{},n.link=!1),(b=y.props.itemVar)&&("~"!==b.charAt(0)&&L("Use itemVar='~myItem'"),b=b.slice(1))),i&&(o=o||i._.onRender,n=O(n,i.ctx)),a===!0&&(g=!0,a=0),o&&(n&&n.link===!1||s&&s._.noVws)&&(o=void 0),_=o,o===!0&&(_=void 0,o=i._.onRender),n=e.helpers?O(e.helpers,n):n,w=n,Me(t)&&!r)for(p=g?i:void 0!==a&&i||new x(n,"array",i,t,e,a,o),i&&i._.useKey&&(p._.bnd=!s||s._.bnd&&s),b&&(p.it=b),b=p.it,c=0,f=t.length;f>c;c++)b&&l(t[c]),u=new x(w,"item",p,t[c],e,(a||0)+c,o,h),v=e.fn(t[c],u,qe),k+=p._.onRender?p._.onRender(v,u):v;else b&&l(t),p=g?i:new x(w,m||"data",i,t,e,a,o,h),s&&!s.flow&&(p.tag=s),k+=e.fn(t,p,qe);return _?_(k,p):k}function V(e,t,n){var r=void 0!==n?Fe(n)?n.call(t.data,e,t):n||"":"{Error: "+e.message+"}";return Ke.onError&&void 0!==(n=Ke.onError.call(t.data,e,n&&r,t))&&(r=n),t&&!t.linkCtx?Oe.html(r):r}function N(e){throw new qe.Err(e)}function L(e){N("Syntax error\n"+e)}function B(e,t,n,r,i){function a(t){t-=u,t&&g.push(e.substr(u,t).replace(rt,"\\n"))}function o(t,n){t&&(t+="}}",L((n?"{{"+n+"}} block has {{/"+t+" without {{"+t:"Unmatched or missing {{/"+t)+", in template:\n"+e))}function s(s,l,p,_,m,b,x,w,y,k,C,j){(x&&l||y&&!p||w&&":"===w.slice(-1)||k)&&L(s),b&&(m=":",_=gt),y=y||n&&!i;var A=(l||n)&&[[]],I="",E="",T="",S="",V="",N="",B="",R="",F=!y&&!m;p=p||(w=w||"#data",m),a(j),u=j+s.length,x?f&&g.push(["*","\n"+w.replace(/^:/,"ret+= ").replace(it,"$1")+";\n"]):p?("else"===p&&(st.test(w)&&L('for "{{else if expr}}" use "{{else expr}}"'),A=h[7]&&[[]],h[8]=e.substring(h[8],j),h=v.pop(),g=h[2],F=!0),w&&M(w.replace(rt," "),A,t).replace(ot,function(e,t,n,r,i,a,o,s){return r="'"+i+"':",o?(E+=a+",",S+="'"+s+"',"):n?(T+=r+a+",",N+=r+"'"+s+"',"):t?B+=a:("trigger"===i&&(R+=a),I+=r+a+",",V+=r+"'"+s+"',",c=c||ft.test(i)),""}).slice(0,-1),A&&A[0]&&A.pop(),d=[p,_||!!r||c||"",F&&[],$(S||(":"===p?"'#data',":""),V,N),$(E||(":"===p?"data,":""),I,T),B,R,A||0],g.push(d),F&&(v.push(h),h=d,h[8]=u)):C&&(o(C!==h[0]&&"else"!==h[0]&&C,h[0]),h[8]=e.substring(h[8],j),h=v.pop()),o(!h&&C),g=h[2]}var l,d,c,f=Ke.allowCode||t&&t.allowCode||Je.allowCode===!0,p=[],u=0,v=[],g=p,h=[,,p];return f&&(t.allowCode=f),n&&(void 0!==r&&(e=e.slice(0,-r.length-2)+Xe),e=ze+e+Xe),o(v[0]&&v[0][2].pop()[0]),e.replace(Ve,s),a(e.length),(u=p[p.length-1])&&o(""+u!==u&&+u[8]===u[8]&&u[0]),n?(l=P(p,e,n),R(l,[p[0][7]])):l=P(p,t),l}function R(e,t){var n,r,i=0,a=t.length;for(e.deps=[];a>i;i++){r=t[i];for(n in r)"_jsvto"!==n&&r[n].length&&(e.deps=e.deps.concat(r[n]))}e.paths=r}function $(e,t,n){return[e.slice(0,-1),t.slice(0,-1),n.slice(0,-1)]}function F(e,t){return"\n	"+(t?t+":{":"")+"args:["+e[0]+"]"+(e[1]||!t?",\n	props:{"+e[1]+"}":"")+(e[2]?",\n	ctx:{"+e[2]+"}":"")}function M(e,t,n){function r(r,_,m,b,x,w,y,k,C,j,A,I,E,T,S,V,N,R,$,F){function M(e,n,r,o,s,l,f,p){var u="."===r;if(r&&(x=x.slice(n.length),/^\.?constructor$/.test(p||x)&&L(e),u||(e=(o?'view.hlp("'+o+'")':s?"view":"data")+(p?(l?"."+l:o?"":s?"":"."+r)+(f||""):(p=o?"":s?l||"":r,"")),e+=p?"."+p:"",e=n+("view.data"===e.slice(0,9)?e.slice(5):e)),d)){if(D="linkTo"===i?a=t._jsvto=t._jsvto||[]:c.bd,U=u&&D[D.length-1]){if(U._jsv){for(;U.sb;)U=U.sb;U.bnd&&(x="^"+x.slice(1)),U.sb=x,U.bnd=U.bnd||"^"===x.charAt(0)}}else D.push(x);h[v]=$+(u?1:0)}return e}b=d&&b,b&&!k&&(x=b+x),w=w||"",m=m||_||I,x=x||C,j=j||N||"";var P,O,D,U,q;if(!y||l||s){if(d&&V&&!l&&!s&&(!i||o||a)&&(P=h[v-1],F.length-1>$-(P||0))){if(P=F.slice(P,$+r.length),O!==!0)if(D=a||f[v-1].bd,U=D[D.length-1],U&&U.prm){for(;U.sb&&U.sb.prm;)U=U.sb;q=U.sb={path:U.sb,bnd:U.bnd}}else D.push(q={path:D.pop()});V=Qe+":"+P+" onerror=''"+We,O=u[V],O||(u[V]=!0,u[V]=O=B(V,n,!0)),O!==!0&&q&&(q._jsv=O,q.prm=c.bd,q.bnd=q.bnd||q.path&&q.path.indexOf("^")>=0)}return l?(l=!E,l?r:I+'"'):s?(s=!T,s?r:I+'"'):(m?(h[v]=$++,c=f[++v]={bd:[]},m):"")+(R?v?"":(p=F.slice(p,$),(i?(i=o=a=!1,"\b"):"\b,")+p+(p=$+r.length,d&&t.push(c.bd=[]),"\b")):k?(v&&L(e),d&&t.pop(),i=x,o=b,p=$+r.length,b&&(d=c.bd=t[i]=[]),x+":"):x?x.split("^").join(".").replace(tt,M)+(j?(c=f[++v]={bd:[]},g[v]=!0,j):w):w?w:S?(g[v]=!1,c=f[--v],S+(j?(c=f[++v],g[v]=!0,j):"")):A?(g[v]||L(e),","):_?"":(l=E,s=T,'"'))}L(e)}var i,a,o,s,l,d=t&&t[0],c={bd:d},f={0:c},p=0,u=n?n.links:d&&(d.links=d.links||{}),v=0,g={},h={},_=(e+(n?" ":"")).replace(nt,r);return!v&&_||L(e)}function P(e,t,n){var r,i,a,o,s,l,d,c,f,p,u,v,g,h,_,m,b,x,w,y,k,C,j,I,E,T,S,V,N,B,$=0,M=He.useViews||t.useViews||t.tags||t.templates||t.helpers||t.converters,O="",D={},U=e.length;for(""+t===t?(x=n?'data-link="'+t.replace(rt," ").slice(1,-1)+'"':t,t=0):(x=t.tmplName||"unnamed",t.allowCode&&(D.allowCode=!0),t.debug&&(D.debug=!0),u=t.bnds,b=t.tmpls),r=0;U>r;r++)if(i=e[r],""+i===i)O+='\n+"'+i+'"';else if(a=i[0],"*"===a)O+=";\n"+i[1]+"\nret=ret";else{if(o=i[1],k=!n&&i[2],s=F(i[3],"params")+"},"+F(g=i[4]),V=i[5],B=i[6],C=i[8]&&i[8].replace(it,"$1"),(E="else"===a)?v&&v.push(i[7]):($=0,u&&(v=i[7])&&(v=[v],$=u.push(1))),M=M||g[1]||g[2]||v||/view.(?!index)/.test(g[0]),(T=":"===a)?(o&&(a=o===gt?">":o+a),B=i[6]||Ke.trigger):(k&&(w=A(C,D),w.tmplName=x+"/"+a,w.useViews=w.useViews||M,P(k,w),M=w.useViews,b.push(w)),E||(y=a,M=M||a&&(!Ue[a]||!Ue[a].flow),I=O,O=""),j=e[r+1],j=j&&"else"===j[0]),N=V?";\ntry{\nret+=":"\n+",h="",_="",T&&(v||B||o&&o!==gt)){if(S="return {"+s+"};",m='c("'+o+'",view,',S=new Function("data,view,j,u"," // "+x+" "+$+" "+a+"\n"+S),S._er=V,h=m+$+",",_=")",S._tag=a,n)return S;R(S,v),p=!0}if(O+=T?(n?(V?"\ntry{\n":"")+"return ":N)+(p?(p=void 0,M=f=!0,m+(v?(u[$-1]=S,$):"{"+s+"}")+")"):">"===a?(d=!0,"h("+g[0]+")"):(c=!0,"((v="+g[0]+')!=null?v:"")')):(l=!0,"\n{view:view,tmpl:"+(k?b.length:"0")+","+s+"},"),y&&!j){if(O="["+O.slice(0,-1)+"]",m='t("'+y+'",view,this,',n||v){if(O=new Function("data,view,j,u"," // "+x+" "+$+" "+y+"\nreturn "+O+";"),O._er=V,O._tag=y,v&&R(u[$-1]=O,v),n)return O;h=m+$+",undefined,",_=")"}O=I+N+m+($||O)+")",v=0,y=0}V&&(M=!0,O+=";\n}catch(e){ret"+(n?"urn ":"+=")+h+"j._err(e,view,"+V+")"+_+";}\n"+(n?"":"ret=ret"))}O="// "+x+"\nvar v"+(l?",t=j._tag":"")+(f?",c=j._cnvt":"")+(d?",h=j._html":"")+(n?";\n":',ret=""\n')+(D.debug?"debugger;":"")+O+(n?"\n":";\nreturn ret;"),Ke.debugMode!==!1&&(O="try {\n"+O+"\n}catch(e){\nreturn j._err(e, view);\n}");try{O=new Function("data,view,j,u",O)}catch(q){L("Compiled template code:\n\n"+O+'\n: "'+q.message+'"')}return t&&(t.fn=O,t.useViews=!!M),O}function O(e,t){return e&&e!==t?t?d(d({},t),e):e:t&&d({},t)}function D(e){return vt[e]||(vt[e]="&#"+e.charCodeAt(0)+";")}function U(e){var t,n,r=[];if(typeof e===ht)for(t in e)n=e[t],n&&n.toJSON&&!n.toJSON()||Fe(n)||r.push({key:t,prop:n});return r}function q(e,n,r){var i=this.jquery&&(this[0]||N('Unknown template: "'+this.selector+'"')),a=i.getAttribute(_t);return T.call(a?t.data(i)[mt]:Pe(i),e,n,r)}function K(e){return void 0!=e?ct.test(e)&&(""+e).replace(pt,D)||e:""}function H(e,n,r){var i,a,o,s,l,d,c,f,p,u,v,g,h,_,m,b,x,w=e.target,y=w._jsvBnd;if(y)for(;u=Hn.exec(y);)if((u=$n[u[1]])&&(m=u.to)){if(s=u.linkCtx,p=s.view,_=s.tag,f=t(w),g=p.hlp(fn),h=p.hlp(pn),o=G(w),i=jn[o],void 0===r&&(r=Fe(o)?o(w):i?f[i]():f.attr(o)),d=m[1],m=m[0],m=m+""===m?[s.data,m]:m,d&&(l=Fe(d)?d:p.getRsc("converters",d)),"SELECT"===s.elem.nodeName&&(s.elem._jsvSel=r=r||(s.elem.multiple?[]:r)),l&&(r=l.call(_,r)),v=p.linkCtx,p.linkCtx=s,b={change:"change",oldValue:s._val,value:r},!(g&&(a=g.call(s,e,b)===!1)||_&&_.onBeforeChange&&(a=_.onBeforeChange(e,b)===!1)||void 0===r)&&(c=m[0],void 0!==r&&c)){if(c._jsv)for(x=c,c=s.data;x&&x.sb;)c=s._ctxCb(x,c),x=x.sb;_&&(_._.chging=!0),$e(c).setProperty(m[2]||m[1],r),h&&h.call(s,e,b),_&&(_.onAfterChange&&_.onAfterChange(e,b),_._.chging=void 0),s._val=r}p.linkCtx=v}}function J(e,t,n){var r,i,a,o,s,l,d=this,c=d.tag,f=d.data,p=d.elem,u=d.convert,v=p.parentNode,g=d.view,h=g.linkCtx,_=g.hlp(fn);if(g.linkCtx=d,!(!v||_&&t&&_.call(d,e,t)===!1||t&&"*"!==e.data.prop&&e.data.prop!==t.path)){if(t&&(d.eventArgs=t),t||d._toLk){if(d._toLk=0,n._er)try{i=n(f,g)}catch(m){s=n._er,l=V(m,g,new Function("data,view","return "+s+";")(f,g)),i=[{props:{},args:[l]}]}else i=n(f,g,qe);if(r=z(i,d,c=d.tag,d.attr||G(p,!0,void 0!==u)),c){if(o=s||c._er,i=i[0]?i:[i],a=!o&&t&&c.onUpdate&&c.onUpdate(e,t,i)===!1,_e(c,i,o),a||r===mn)return r===gt&&c.onBeforeLink&&c.onBeforeLink(),ue(c),te(d,f,p),void(g.linkCtx=h);if(c._.chging)return;i=":"===c.tagName?qe._cnvt(c.cvt,g,i[0]):qe._tag(c,g,g.tmpl,i,!0,l)}else n._tag&&(u=""===u?xn:u,i=u?qe._cnvt(u,g,i[0]||i):qe._tag(n._tag,g,g.tmpl,i,!0,l),je(c=d.tag,!0),r=d.attr||r);W(i,d,r,c)&&t&&(_=g.hlp(pn))&&_.call(d,e,t),d._noUpd=0,c&&(c._er=s,ue(c,t))}te(d,f,p),g.linkCtx=h}}function z(e,n,r,i){var a,o,s,l,d=r&&r.parentElem||n.elem;if(void 0!==e){if(l=t(d),i=r&&r.attr||i,Fe(e)&&N(n.expr+": missing parens"),s=/^css-/.test(i)&&i.slice(4))a=t.style(d,s),+e===e&&(a=parseInt(a));else if("link"!==i){if("value"===i)d.type===gn&&(a=l.prop(i=vn));else if(i===hn){if(d.value!==""+e)return i;a=l.prop(vn)}void 0===a&&(o=jn[i],a=o?l[o]():l.attr(i))}n._val=a}return i}function Q(e,t){e._df=t,e[(t?"set":"remove")+"Attribute"](kn,"")}function W(n,r,i,a){var o,s,l,d,c,f,p,u,v,g,h,_,m,b,x=i!==mn&&void 0!==n&&!r._noUpd,w=r.data,y=a&&a.parentElem||r.elem,k=y.parentNode,C=t(y),j=r.view,A=r._val,I=j.linkCtx,E=a||i===gt;if(a&&(a.parentElem=a.parentElem||r.expr||a._elCnt?y:k,s=a._prv,l=a._nxt),!x)return void(i===gt&&a&&a.onBeforeLink&&a.onBeforeLink());if("visible"===i&&(i="css-display"),/^css-/.test(i))"visible"===r.attr&&(m=(y.currentStyle||Jn.call(e,y,"")).display,n?(n=y._jsvd||m,n!==mn||(n=Rn[_=y.nodeName])||(h=document.createElement(_),document.body.appendChild(h),n=Rn[_]=(h.currentStyle||Jn.call(e,h,"")).display,document.body.removeChild(h))):(y._jsvd=m,n=mn)),(E=E||A!==n)&&t.style(y,i.slice(4),n);else if("link"!==i){if(/^data-/.test(i)&&t.data(y,i.slice(5),n),i===vn)f=!0,n=n&&"false"!==n;else if(i===hn){if(y.value!==""+n)return void te(r,w,y);n=f=!0,i=vn}else"selected"===i||"disabled"===i||"multiple"===i||"readonly"===i?n=n&&"false"!==n?i:null:"value"===i&&"SELECT"===y.nodeName&&(y._jsvSel=Me(n)?n:""+n);(o=jn[i])?i===gt?(j.linkCtx=r,a&&a._.inline?(c=a.nodes(!0),a._elCnt&&(s&&s!==l?ke(s,l,y,a._tgId,"^",!0):(p=y._df)&&(u=a._tgId+"^",v=p.indexOf("#"+u)+1,g=p.indexOf("/"+u),v&&g>0&&(v+=u.length,g>v&&(Q(y,p.slice(0,v)+p.slice(g)),Ce(p.slice(v,g))))),s=s?s.previousSibling:l?l.previousSibling:y.lastChild),t(c).remove(),a&&a.onBeforeLink&&a.onBeforeLink(),d=j.link(j.data,y,s,l,n,a&&{tag:a._tgId,lazyLink:a.tagCtx.props.lazyLink})):(x&&C.empty(),a&&a.onBeforeLink&&a.onBeforeLink(),x&&(d=j.link(w,y,s,l,n,a&&{tag:a._tgId}))),j.linkCtx=I):((E=E||A!==n)&&("text"===i&&y.children&&!y.children[0]?void 0!==y.textContent?y.textContent=n:y.innerText=null===n?"":n:C[o](n)),!(b=k._jsvSel)||"value"!==i&&C.attr("value")||(y.selected=t.inArray(""+n,Me(b)?b:[b])>-1)):(E=E||A!==n)&&C[f?"prop":"attr"](i,void 0!==n||f?n:null),r._val=n}return d||E}function X(e,t){var n=this,r=n.hlp(fn),i=n.hlp(pn);if(!r||r.call(this,e,t)!==!1){if(t){var a=t.change,o=t.index,s=t.items;switch(a){case"insert":n.addViews(o,s);break;case"remove":n.removeViews(o,s.length);break;case"move":n.refresh();break;case"refresh":n.refresh()}}i&&i.call(this,e,t)}}function Z(e){var n,r,i=e.type,a=e.data,o=e._.bnd;!e._.useKey&&o&&((r=e._.bndArr)&&(t([r[1]]).off(Nt,r[0]),e._.bndArr=void 0),o!==!!o?i?o._.arrVws[e._.id]=e:delete o._.arrVws[e._.id]:i&&a&&(n=function(t){t.data&&t.data.off||X.apply(e,arguments)},t([a]).on(Nt,n),e._.bndArr=[n,a]))}function G(e,t,n){var r=e.nodeName.toLowerCase(),i=He._fe[r]||e.contentEditable===xn&&{to:gt,from:gt};return i?t?"input"===r&&e.type===hn?hn:i.to:i.from:t?n?"text":gt:""}function Y(e,n,r,i,a,o,s){var l,d,c,f,p,u=e.parentElem,v=e._prv,g=e._nxt,h=e._elCnt;if(v&&v.parentNode!==u&&N("Missing parentNode"),s){f=e.nodes(),h&&v&&v!==g&&ke(v,g,u,e._.id,"_",!0),e.removeViews(void 0,void 0,!0),d=g,h&&(v=v?v.previousSibling:g?g.previousSibling:u.lastChild),t(f).remove();for(p in e._.bnds)be(p)}else{if(n){if(c=i[n-1],!c)return!1;v=c._nxt}h?(d=v,v=d?d.previousSibling:u.lastChild):d=v.nextSibling}l=r.render(a,o,e._.useKey&&s,e,s||n,!0),e.link(a,u,v,d,l,c)}function ee(e,t,n){var r,i;return n?(i="^`",je(n,!0),r=n._tgId,r||($n[r=Fn++]=n,n._tgId=""+r)):(i="_`",je(sn[r=t._.id]=t)),"#"+r+i+(void 0!=e?e:"")+"/"+r+i}function te(e,t,n){var r,i,a,o,s,l=e.tag,c=e.convertBack,f=[],p=e._bndId||""+Fn++,u=e._hdl;if(e._bndId=void 0,l&&(f=l.depends||f,f=Fe(f)?l.depends(l):f,a=l.linkedElem),!e._depends||""+e._depends!=""+f){for(e._depends&&$e._apply(!1,[t],e._depends,u,!0),o=e.fn.deps.slice(),i=o.length;i--;)s=o[i],s._jsv&&(o[i]=d({},s));r=$e._apply(!1,[t],o,f,u,e._ctxCb),r.elem=n,r.linkCtx=e,r._tgId=p,n._jsvBnd=n._jsvBnd||"",n._jsvBnd+="&"+p,e._depends=f,e.view._.bnds[p]=p,$n[p]=r,a&&(r.to=[[],c]),(a||void 0!==c)&&he(r,l&&l.convertBack||c),l&&(l.onAfterBind&&l.onAfterBind(r),l.flow||l._.inline||(n.setAttribute(dn,(n.getAttribute(dn)||"")+"#"+p+"^/"+p+"^"),l._tgId=""+p))}if(a&&a[0])for(l._.radio&&(a=a.find(_n)),i=a.length;i--;)a[i]._jsvBnd=a[i]._jsvBnd||n._jsvBnd+"+",a[i]._jsvLkEl=l}function ne(e,t,n,r,i,a,o){return re(this,e,t,n,r,i,a,o)}function re(e,n,r,i,a,o,s,l){if(i===!0?(a=i,i=void 0):i="object"!=typeof i?void 0:d({},i),e&&n){n=n.jquery?n:t(n),en||(en=document.body,t(en).on(cn,H).on("blur","[contenteditable]",H));for(var c,f,p,u,v,g,h,_,m,b=ee,x=i&&"replace"===i.target,w=n.length;w--;){if(h=n[w],o=o||nn(h),(m=o===Le)&&(Le.data=(Le.ctx=i||{}).root=r),""+e===e)ae(e,h,o,void 0,!0,r,i);else{if(void 0!==e.markup)x&&(g=h.parentNode),p=e.render(r,i,a,o,void 0,b),g?(s=h.previousSibling,l=h.nextSibling,t.cleanData([h],!0),g.removeChild(h),h=g):(s=l=void 0,t(h).empty());else{if(e!==!0||o!==Le)break;_={lnk:1}}if(h._df&&!l){for(u=de(h._df,!0,On),c=0,f=u.length;f>c;c++)v=u[c],(v=sn[v.id])&&void 0!==v.data&&v.parent.removeViews(v._.key,void 0,!0);Q(h)}o.link(r,h,s,l,p,_,i)}m&&(Le.data=Le.ctx=void 0)}}return n}function ie(e,n,r,i,a,o,s,l){function d(e,t,n,r,i,o,s,l,d,c,f,p,v,h){var _,m,b="";return h?(u=0,e):(g=d||c||"",r=r||f,n=n||v,q&&!n&&(!e||r||g||o&&!u)&&(q=void 0,U=me.shift()),r=r||n,r&&(u=0,q=void 0,$&&(n||v?Bn[U]||/;svg;|;math;/.test(";"+me.join(";")+";")||(_="'<"+U+".../"):Bn[r]?_="'</"+r:me.length&&r===U||(_="Mismatch: '</"+r),_&&L(_+">' in:\n"+a)),W=z,U=me.shift(),z=Nn[U],f=f?"</"+f+">":"",W&&(he+=Y,Y="",z?he+="-":(b=f+yn+"@"+he+wn+(p||""),he=be.shift()))),z?(o?Y+=o:t=f||v||"",g&&(t+=g,Y&&(t+=" "+dn+'="'+Y+'"',Y=""))):t=o?t+b+i+(u?"":yn+o+wn)+l+g:b||e,$&&s&&(u&&L("{^{ within elem markup ("+u+' ). Use data-link="..."'),"#"===o.charAt(0)?me.unshift(o.slice(1)):o.slice(1)!==(m=me.shift())&&L("Closing tag for {^{...}} under different elem: <"+m+">")),g&&(u=g,me.unshift(U),U=g.slice(1),$&&me[0]&&me[0]===Ln[U]&&N("Parent of <tr> must be <tbody>"),q=Bn[U],(z=Nn[U])&&!W&&(be.unshift(he),he=""),W=z,he&&z&&(he+="+")),t)}function c(e,t){var r,i,a,o,s,l,d,c=[];if(e){for("@"===e._tkns.charAt(0)&&(t=w.previousSibling,w.parentNode.removeChild(w),w=void 0),b=e.length;b--;){if(k=e[b],a=k.ch,r=k.path)for(m=r.length-1;i=r.charAt(m--);)"+"===i?"-"===r.charAt(m)?(m--,t=t.previousSibling):t=t.parentNode:t=t.lastChild;"^"===a?(g=$n[s=k.id])&&(d=t&&(!w||w.parentNode!==t),(!w||d)&&(g.parentElem=t),k.elCnt&&d&&Q(t,(k.open?"#":"/")+s+a+(t._df||"")),c.push([d?null:w,k])):(y=sn[s=k.id])&&(y.parentElem||(y.parentElem=t||w&&w.parentNode||n,y._.onRender=ee,y._.onArrayChange=X,Z(y)),o=y.parentElem,k.open?(y._elCnt=k.elCnt,t&&!w?Q(t,"#"+s+a+(t._df||"")):(y._prv||Q(o,se(o._df,"#"+s+a)),y._prv=w)):(!t||w&&w.parentNode===t?w&&(y._nxt||Q(o,se(o._df,"/"+s+a)),y._nxt=w):(Q(t,"/"+s+a+(t._df||"")),y._nxt=void 0),v=y.linkCtx,(l=y.ctx&&y.ctx.onAfterCreate||xe)&&l.call(v,y)))}for(b=c.length;b--;)_e.push(c[b])}return!e||e.elCnt}function f(e){var t,n,r;if(e)for(b=e.length,m=0;b>m;m++)if(k=e[m],n=g=$n[k.id].linkCtx.tag,r=g.tagName===B,!g.flow||r){if(!V){for(t=1;n=n.parent;)t++;F=F||t}!V&&t!==F||B&&!r||S.push(g)}}function p(){var o,l,d="",p={},u=an+(pe?",["+kn+"]":"");for(x=Vn?n.querySelectorAll(u):t(u,n).get(),_=x.length,r&&r.innerHTML&&(j=Vn?r.querySelectorAll(u):t(u,r).get(),r=j.length?j[j.length-1]:r),F=0,h=0;_>h;h++)if(w=x[h],r&&!ne)ne=w===r;else{if(i&&w===i){pe&&(d+=le(w));break}if(w.parentNode)if(pe){if(d+=le(w),w._df){for(o=h+1;_>o&&w.contains(x[o]);)o++;p[o-1]=w._df}p[h]&&(d+=p[h]||"")}else oe&&(k=de(w,void 0,Un))&&(k=k[0])&&(re=re?k.id!==re&&re:k.open&&k.id),!re&&we(de(w))&&w.getAttribute(rn)&&_e.push([w])}if(pe&&(d+=n._df||"",(l=d.indexOf("#"+pe.id)+1)&&(d=d.slice(l+pe.id.length)),l=d.indexOf("/"+pe.id),l+1&&(d=d.slice(0,l)),f(de(d,void 0,qn))),void 0===a&&n.getAttribute(rn)&&_e.push([n]),ce(r,z),ce(i,z),pe)return void(ie&&ie.resolve());for(z&&he+Y&&(w=i,he&&(i?c(de(he+"+",!0),i):c(de(he,!0),n)),c(de(Y,!0),n),i&&(d=i.getAttribute(dn),(_=d.indexOf(te)+1)&&(d=d.slice(_+te.length-1)),i.setAttribute(dn,Y+d))),_=_e.length,h=0;_>h;h++)w=_e[h],C=w[1],w=w[0],C?(g=$n[C.id])&&((v=g.linkCtx)&&(g=v.tag,g.linkCtx=v),C.open?(w&&(g.parentElem=w.parentNode,g._prv=w),g._elCnt=C.elCnt,g.onBeforeLink&&g.onBeforeLink(),y=g.tagCtx.view,ae(void 0,g._prv,y,C.id)):(g._nxt=w,g._.unlinked&&(R=g.tagCtx,y=R.view,ue(g)))):ae(w.getAttribute(rn),w,nn(w),void 0,oe,e,s);ie&&ie.resolve()}var u,v,g,h,_,m,b,x,w,y,k,C,j,A,I,E,T,S,V,B,R,$,F,M,P,O,D,U,q,K,H,J,z,W,G,Y,te,ne,re,ie,oe,pe,ve=this,ge=ve._.id+"_",he="",_e=[],me=[],be=[],xe=ve.hlp(un),we=c;if(o&&(ie=o.lazyLink&&t.Deferred(),o.tmpl?I="/"+o._.id+"_":(oe=o.lnk,o.tag&&(ge=o.tag+"^",o=!0),(pe=o.get)&&(we=f,S=pe.tags,V=pe.deep,B=pe.name)),o=o===!0),n=n?""+n===n?t(n)[0]:n.jquery?n[0]:n:ve.parentElem||document.body,$=!He.noValidate&&n.contentEditable!==xn,U=n.tagName.toLowerCase(),z=!!Nn[U],r=r&&fe(r,z),i=i&&fe(i,z)||null,void 0!=a){if(H=document.createElement("div"),K=H,te=Y="",G="http://www.w3.org/2000/svg"===n.namespaceURI?"svg_ns":(D=lt.exec(a))&&D[1]||"",z){for(T=i;T&&!(E=de(T));)T=T.nextSibling;(J=E?E._tkns:n._df)&&(A=I||"",(o||!I)&&(A+="#"+ge),m=J.indexOf(A),m+1&&(m+=A.length,te=Y=J.slice(0,m),J=J.slice(m),E?T.setAttribute(dn,J):Q(n,J)))}if(q=void 0,a=(""+a).replace(Pn,d),$&&me.length&&L("Mismatched '<"+U+"...>' in:\n"+a),l)return;for(Sn.appendChild(H),G=on[G]||on.div,M=G[0],K.innerHTML=G[1]+a+G[2];M--;)K=K.lastChild;for(Sn.removeChild(H),P=document.createDocumentFragment();O=K.firstChild;)P.appendChild(O);n.insertBefore(P,i)}return ie?setTimeout(p,0):p(),ie&&ie.promise()}function ae(e,t,n,r,i,a,o){var s,l,d,c,f,p,u,v,g,h,_,m,b=[];if(r)g=$n[r],g=g.linkCtx?g.linkCtx.tag:g,v=g.linkCtx||{data:n.data,elem:g._elCnt?g.parentElem:t,view:n,ctx:n.ctx,attr:gt,fn:g._.bnd,tag:g,_bndId:r},oe(v,v.fn);else if(e&&t){for(a=i?a:n.data,s=n.tmpl,e=pe(e,G(t)),m=tn.lastIndex=0;l=tn.exec(e);)b.push(l),m=tn.lastIndex;for(m<e.length&&L(e);l=b.shift();){for(h=tn.lastIndex,d=l[1],p=l[3];b[0]&&"else"===b[0][4];)p+="}{"+b.shift()[3],_=!0;_&&(p+="}{{/"+l[4]+"}"),f=l[9],v={data:a,elem:t,view:n,ctx:o,attr:d,isLk:i,_toLk:1,_noUpd:l[2]},l[6]&&(c=l[10],v.convert=l[5]||"",!d&&void 0!==c&&G(t)?v.convertBack=c=c.slice(1):c=void 0),v.expr=d+p,u=s.links[p],u||(s.links[p]=u=qe.tmplFn(p,s,!0,c,_)),v.fn=u,oe(v,u),tn.lastIndex=h}}}function oe(e,t){function n(n,r){J.call(e,n,r,t)}n.noArray=!0,e.isLk&&je(e.view=new qe.View(qe.extendCtx(e.ctx,e.view.ctx),"link",e.view,e.data,e.expr,void 0,ee)),e._ctxCb=we(e.view),e._hdl=n,n(!0)}function se(e,t){var n;return e?(n=e.indexOf(t),n+1?e.slice(0,n)+e.slice(n+t.length):e):""}function le(e){return e&&(""+e===e?e:e.tagName===bn?e.type.slice(3):1===e.nodeType&&e.getAttribute(dn)||"")}function de(e,t,n){function r(e,t,n,r,a,s){o.push({elCnt:i,id:r,ch:a,open:t,close:n,path:s,token:e})}var i,a,o=[];return(a=t?e:le(e))?(i=o.elCnt=e.tagName!==bn,i="@"===a.charAt(0)||i,o._tkns=a,a.replace(n||Kn,r),o):void 0}function ce(e,t){e&&("jsv"===e.type?e.parentNode.removeChild(e):t&&""===e.getAttribute(rn)&&e.removeAttribute(rn))}function fe(e,t){for(var n=e;t&&n&&1!==n.nodeType;)n=n.previousSibling;return n&&(1!==n.nodeType?(n=document.createElement(bn),n.type="jsv",e.parentNode.insertBefore(n,e)):le(n)||n.getAttribute(rn)||n.setAttribute(rn,"")),n}function pe(e,n){return e=t.trim(e).replace(at,"\\$&"),e.slice(-1)!==We?e=Qe+":"+e+(n?":":"")+We:e}function ue(e,n){var r,i,a,o,s,l,d,c,f=e.tagCtx,p=f.view,u=f.props,v=e.linkCtx=e.linkCtx||{tag:e,data:p.data,view:p,ctx:p.ctx};if(e.onAfterLink&&e.onAfterLink(f,v,n),e._.unlinked=void 0,r=e.targetTag?e.targetTag.linkedElem:e.linkedElem,!e.noVal&&(i=r&&r[0])){if((a=e._.radio)&&(r=r.find(_n)),a||!e._.chging){if(o=e.cvtArgs()[0],a||i!==v.elem){for(s=r.length;s--;)i=r[s],l=i._jsvLkEl,e._.inline&&(!l||l!==e&&l.targetTag!==e)&&(i._jsvLkEl=e,he($n[e._tgId],e.convertBack),i._jsvBnd="&"+e._tgId+"+"),a&&(i[vn]=o===i.value);v._val=o}void 0!==o&&(a||void 0===i.value?i.contentEditable===xn&&(i.innerHTML=o):i.type===gn?i[vn]=o&&"false"!==o:r.val(o))}e.setSize&&(u.height&&r.height(u.height),u.width&&r.width(u.width)),u["class"]&&r.addClass(u["class"]),u.id&&(r[0].id=u.id),u.name&&r.attr("name",u.name)}(i=i||":"===e.tagName&&v.elem)&&(d=i._jsvTr,c=u.trigger||Ke.trigger,d!==c&&(i._jsvTr=c,r=r||t(i),ge(r,d,"off"),ge(r,c,"on")))}function ve(e){setTimeout(function(){H(e)},0)}function ge(e,t,n){t&&(t=""+t===t?t:"keydown",e[n](t,"keydown"===t?ve:H))}function he(e,t){var n,r,i,a,o,s=e.linkCtx,l=s.data,d=s.fn.paths;if(e&&d)if(d=(n=d._jsvto)||d[0],r=d&&d.length,!r||s.tag&&!s.tag.tagCtx.args.length)e.to=[[],t];else{if(a=d[r-1],a._jsv){for(o=a;a.sb&&a.sb._jsv;)i=a=a.sb;i=a.sb||i&&i.path,a=i?i.slice(1):o.path}e.to=i?[[o,a],t]:[s._ctxCb(i=a.split("^").join("."))||[l,i],t]}}function _e(e,t,n){var r,i,a=e.tagCtx.view,o=e.tagCtxs||[e.tagCtx],s=o.length,l=!t;if(t=t||e._.bnd.call(a.tmpl,(e.linkCtx||a).data,a,qe),n)o=e.tagCtxs=t,e.tagCtx=o[0];else for(;s--;)r=o[s],i=t[s],$e(r.props).setProperty(i.props),d(r.ctx,i.ctx),r.args=i.args,l&&(r.tmpl=i.tmpl);return qe._ths(e,o[0]),o}function me(e){for(var t,n,r,i=[],a=e.length,o=a;o--;)i.push(e[o]);for(o=a;o--;)if(n=i[o],n.parentNode){if(r=n._jsvBnd)for(r=r.slice(1).split("&"),n._jsvBnd="",t=r.length;t--;)be(r[t],n._jsvLkEl,n);Ce(le(n)+(n._df||""))}}function be(e,n,r){var i,a,o,s,l,d,c,f,p,u,v,g,h=$n[e];if(n)r===n.linkedElem[0]&&(r._jsvLkEl=void 0,n.linkedElem=void 0);else if(h){delete $n[e];for(i in h.bnd)s=h.bnd[i],l=h.cbId,Me(s)?t([s]).off(Nt+l).off(Vt+l):t(s).off(Vt+l),delete h.bnd[i];if(a=h.linkCtx){if(o=a.tag){if(d=o.tagCtxs)for(c=d.length;c--;)(f=d[c].map)&&f.unmap();p=o.linkedElem,u=p&&p[0]||a.elem,(v=u&&u._jsvTr)&&(ge(p||t(u),v,"off"),u._jsvTr=void 0),o.onDispose&&o.onDispose(),o._elCnt||(o._prv&&o._prv.parentNode.removeChild(o._prv),o._nxt&&o._nxt.parentNode.removeChild(o._nxt))}g=a.view,"link"===g.type?g.parent.removeViews(g._.key,void 0,!0):delete g._.bnds[e]}delete Lt[h.cbId]}}function xe(e){e?(e=e.jquery?e:t(e),e.each(function(){for(var e;(e=nn(this,!0))&&e.parent;)e.parent.removeViews(e._.key,void 0,!0);me(this.getElementsByTagName("*"))}),me(e)):(en&&(t(en).off(cn,H).off("blur","[contenteditable]",H),en=void 0),Le.removeViews(),me(document.body.getElementsByTagName("*")))}function we(e){return function(t,n){var r,i,a=[n];if(e&&t){if(t._jsv)return t._jsv.call(e.tmpl,n,e,qe);if("~"===t.charAt(0))return"~tag"===t.slice(0,4)&&(i=e.ctx,"."===t.charAt(4)&&(r=t.slice(5).split("."),i=i.tag),r)?i?[i,r.join("."),n]:[]:(t=t.slice(1).split("."),(n=e.hlp(t.shift()))&&(t.length&&a.unshift(t.join(".")),a.unshift(n)),n?a:[]);if("#"===t.charAt(0))return"#data"===t?[]:[e,t.replace(Mn,""),n]}}}function ye(e){return e.type===gn?e[vn]:e.value}function ke(e,t,n,r,i,a){var o,s,l,d,c,f,p,u=0,v=e===t;if(e){for(l=de(e)||[],o=0,s=l.length;s>o;o++){if(d=l[o],f=d.id,f===r&&d.ch===i){if(!a)break;s=0}v||(c="_"===d.ch?sn[f]:$n[f].linkCtx.tag,d.open?c._prv=t:d.close&&(c._nxt=t)),u+=f.length+2}u&&e.setAttribute(dn,e.getAttribute(dn).slice(u)),p=t?t.getAttribute(dn):n._df,(s=p.indexOf("/"+r+i)+1)&&(p=l._tkns.slice(0,u)+p.slice(s+(a?-1:r.length+1))),p&&(t?t.setAttribute(dn,p):Q(n,p))}else Q(n,se(n._df,"#"+r+i)),a||t||Q(n,se(n._df,"/"+r+i))}function Ce(e){var t,n,r,i;if(i=de(e,!0,Dn))for(t=0,n=i.length;n>t;t++)r=i[t],"_"===r.ch?(r=sn[r.id])&&r.type&&r.parent.removeViews(r._.key,void 0,!0):be(r.id)}function je(e,n){e.contents=function(e,n){e!==!!e&&(n=e,e=void 0);var r,i=t(this.nodes());return i[0]&&(r=n?i.filter(n):i,i=e&&n?r.add(i.find(n)):r),
i},e.nodes=function(e,t,n){var r,i=this,a=i._elCnt,o=!t&&a,s=[];for(t=t||i._prv,n=n||i._nxt,r=o?t===i._nxt?i.parentElem.lastSibling:t:i._.inline===!1?t||i.linkCtx.elem.firstChild:t&&t.nextSibling;r&&(!n||r!==n);)(e||a||r.tagName!==bn)&&s.push(r),r=r.nextSibling;return s},e.childTags=function(e,t){e!==!!e&&(t=e,e=void 0);var n=this,r=n.link?n:n.tagCtx.view,i=n._prv,a=n._elCnt,o=[];return r.link(void 0,n.parentElem,a?i&&i.previousSibling:i,n._nxt,void 0,{get:{tags:o,deep:e,name:t,id:n.link?n._.id+"_":n._tgId+"^"}}),o},e.refresh=function(e){var t,n,r=this,i=r.linkCtx,a=r.tagCtx.view;return r.disposed&&N("Removed tag"),void 0===e&&(e=qe._tag(r,a,a.tmpl,_e(r),!0)),e+""===e&&(n=r._.inline?gt:i.attr||G(r.parentElem,!0),t=W(e,i,n,r)),ue(r),t||r},e.update=function(e){var t=this.linkedElem;t&&H({target:t[0]},void 0,e)},n?e.domChange=function(){var e=this.parentElem,n=t.hasData(e)&&t._data(e).events,r="jsv-domchange";n&&n[r]&&t(e).triggerHandler(r,arguments)}:(e.addViews=function(e,t,n){var r,i,a=this,o=t.length,s=a.views;if(!a._.useKey&&o&&(n=a.tmpl)&&(i=s.length+o,i===a.data.length&&Y(a,e,n,s,t,a.ctx)!==!1))for(r=e+o;i>r;r++)$e(s[r]).setProperty("index",r);return a},e.removeViews=function(e,n,r){function i(e){var n,i,a,o,s,l,d=c[e];if(d&&d.link){if(n=d._.id,r||(l=d.nodes()),d.removeViews(void 0,void 0,!0),d.type=void 0,o=d._prv,s=d._nxt,a=d.parentElem,r||(d._elCnt&&ke(o,s,a,n,"_"),t(l).remove()),!d._elCnt)try{o.parentNode.removeChild(o),s.parentNode.removeChild(s)}catch(f){}Z(d);for(i in d._.bnds)be(i);delete sn[n]}}var a,o,s,l=this,d=!l._.useKey,c=l.views;if(d&&(s=c.length),void 0===e)if(d){for(a=s;a--;)i(a);l.views=[]}else{for(o in c)i(o);l.views={}}else if(void 0===n&&(d?n=1:(i(e),delete c[e])),d&&n&&s-n===l.data.length){for(a=e+n;a-->e;)i(a);if(c.splice(e,n),s=c.length)for(;s>e;)$e(c[e]).setProperty("index",e++)}return this},e.refresh=function(){var e=this,t=e.parent;return t&&(Y(e,e.index,e.tmpl,t.views,e.data,void 0,!0),Z(e)),e},e.link=ie)}function Ae(e,t,n){if("set"===n.change){for(var r=e.tgt,i=r.length;i--&&r[i].key!==n.path;);-1===i?n.path&&!n.remove&&$e(r).insert({key:n.path,prop:n.value}):n.remove?$e(r).remove(i):$e(r[i]).setProperty("prop",n.value)}}function Ie(e,t,n){var r,i=e.src,a=n.change;"set"===a?"prop"===n.path?$e(i).setProperty(t.target.key,n.value):($e(i).setProperty(n.oldValue,null),delete i[n.oldValue],$e(i).setProperty(n.value,t.target.prop)):"remove"===a?(r=n.items[0],$e(i).removeProperty(r.key),delete i[r.key]):"insert"===a&&(r=n.items[0],r.key&&$e(i).setProperty(r.key,r.prop))}function Ee(e){return e.indexOf(".")<0}var Te=t===!1;if(t=t||e.jQuery,!t||!t.fn)throw"JsViews requires jQuery";var Se,Ve,Ne,Le,Be,Re,$e,Fe,Me,Pe,Oe,De,Ue,qe,Ke,He,Je,ze,Qe,We,Xe,Ze,Ge,Ye,et="v0.9.75",tt=/^(!*?)(?:null|true|false|\d[\d.]*|([\w$]+|\.|~([\w$]+)|#(view|([\w$]+))?)([\w$.^]*?)(?:[.[^]([\w$]+)\]?)?)$/g,nt=/(\()(?=\s*\()|(?:([([])\s*)?(?:(\^?)(!*?[#~]?[\w$.^]+)?\s*((\+\+|--)|\+|-|&&|\|\||===|!==|==|!=|<=|>=|[<>%*:?\/]|(=))\s*|(!*?[#~]?[\w$.^]+)([([])?)|(,\s*)|(\(?)\\?(?:(')|("))|(?:\s*(([)\]])(?=\s*[.^]|\s*$|[^([])|[)\]])([([]?))|(\s+)/g,rt=/[ \t]*(\r\n|\n|\r)/g,it=/\\(['"])/g,at=/['"\\]/g,ot=/(?:\x08|^)(onerror:)?(?:(~?)(([\w$_\.]+):)?([^\x08]+))\x08(,)?([^\x08]+)/gi,st=/^if\s/,lt=/<(\w+)[>\s]/,dt=/[\x00`><"'&]/g,ct=/[\x00`><\"'&]/,ft=/^on[A-Z]|^convert(Back)?$/,pt=dt,ut=0,vt={"&":"&amp;","<":"&lt;",">":"&gt;","\x00":"&#0;","'":"&#39;",'"':"&#34;","`":"&#96;"},gt="html",ht="object",_t="data-jsv-tmpl",mt="jsvTmpl",bt="For #index in nested block use #getIndex().",xt={},wt=e.jsrender,yt=wt&&t&&!t.render,kt={template:{compile:C},tag:{compile:y},helper:{},converter:{}};if(Be={jsviews:et,sub:{View:x,Err:l,tmplFn:B,parse:M,extend:d,extendCtx:O,syntaxErr:L,onStore:{},addSetting:E,settings:{allowCode:!1},advSet:o,_ths:i,_tg:function(){},_cnvt:h,_tag:b,_er:N,_err:V,_html:K},settings:{delimiters:c,advanced:function(e){return e?(d(He,e),qe.advSet(),Je):He}},map:j},(l.prototype=new Error).constructor=l,p.depends=function(){return[this.get("item"),"index"]},u.depends="index",x.prototype={get:f,getIndex:u,getRsc:m,getTmpl:g,hlp:v,_is:"view"},!(wt||t&&t.render)){for(Se in kt)I(Se,kt[Se]);Pe=Be.templates,Oe=Be.converters,De=Be.helpers,Ue=Be.tags,qe=Be.sub,Je=Be.settings,qe._tg.prototype={baseApply:k,cvtArgs:_},Le=qe.topView=new x,t?(t.fn.render=q,t.observable&&(d(qe,t.views.sub),Be.map=t.views.map)):(t={},Te&&(e.jsrender=t),t.renderFile=t.__express=t.compile=function(){throw"Node.js: use npm jsrender, or jsrender-node.js"},t.isFunction=function(e){return"function"==typeof e},t.isArray=Array.isArray||function(e){return"[object Array]"==={}.toString.call(e)},qe._jq=function(e){e!==t&&(d(e,t),t=e,t.fn.render=q,delete t.jsrender)},t.jsrender=et),Ke=qe.settings,Ke.allowCode=!1,Fe=t.isFunction,Me=t.isArray,t.render=xt,t.views=Be,t.templates=Pe=Be.templates;for(Ge in Ke)E(Ge);(Je.debugMode=function(e){return void 0===e?Ke.debugMode:(Ke.debugMode=e,Ke.onError=e+""===e?new Function("","return '"+e+"';"):Fe(e)?e:void 0,Je)})(!1),He=Ke.advanced={useViews:!1,_jsv:!1},Ue({"if":{render:function(e){var t=this,n=t.tagCtx,r=t.rendering.done||!e&&(arguments.length||!n.index)?"":(t.rendering.done=!0,t.selected=n.index,n.render(n.view,!0));return r},flow:!0},"for":{render:function(e){var t,n=!arguments.length,r=this,i=r.tagCtx,a="",o=0;return r.rendering.done||(t=n?i.view.data:e,void 0!==t&&(a+=i.render(t,n),o+=Me(t)?t.length:1),(r.rendering.done=o)&&(r.selected=i.index)),a},flow:!0},props:{baseTag:"for",dataMap:j(U),flow:!0},include:{flow:!0},"*":{render:a,flow:!0},":*":{render:a,flow:!0},dbg:De.dbg=Oe.dbg=s}),Oe({html:K,attr:K,url:function(e){return void 0!=e?encodeURI(""+e):null===e?e:""}}),Je.delimiters("{{","}}","^")}if(yt&&wt.views.sub._jq(t),Be=t.views,qe=Be.sub,Fe=t.isFunction,Me=t.isArray,!t.observe){var Ct=t.event.special,jt=[].slice,At=[].splice,It=[].concat,Et=t.expando,Tt=parseInt,St=/\S+/g,Vt=qe.propChng=qe.propChng||"propertyChange",Nt=qe.arrChng=qe.arrChng||"arrayChange",Lt={},Bt=Vt+".observe",Rt=1,$t=1,Ft=1,Mt=t.hasData,Pt=t.data,Ot={},Dt=function(e){return e._cId=e._cId||".obs"+$t++},Ut=function(e,t){return this._data=t,this._ns=e,this},qt=function(e,t){return this._data=t,this._ns=e,this},Kt=function(e){return Me(e)?[e]:e},Ht=function(e,t,n){e=e?Me(e)?e:[e]:[];var r,i,a=t,o=a,s=e&&e.length,l=[];for(r=0;s>r;r++)i=e[r],Fe(i)?l=l.concat(Ht(i.call(t,t,n),t)):""+i===i?(o!==a&&l.push(a=o),l.push(i)):(t=o=i,o!==a&&l.push(a=o));return l},Jt=function(e,t){for(var n in e)return;delete Lt[t]},zt=function(e,t){function n(e){return typeof e===ht&&(p[0]||f&&Me(e))}if(!e.data||!e.data.off){var r,i,a,o=t.oldValue,s=t.value,l=e.data,d=l.observeAll,c=l.cb,f=!c.noArray,p=l.paths,u=l.ns;e.type===Nt?(c.array||c).call(l,e,t):(l.prop===t.path||"*"===l.prop)&&(d?(r=d._path+"."+t.path,i=d.filter,a=[e.target].concat(d.parents()),n(o)&&Qt(f,u,[o],p,c,!0,i,[a],r),n(s)&&Qt(f,u,[s],p,c,void 0,i,[a],r)):(n(o)&&Qt(f,u,[o],p,c,!0),n(s)&&Qt(f,u,[s],p,c)),l.cb(e,t))}},Qt=function(){var e=It.apply([],arguments);return Re.apply(e.shift(),e)},Wt=function(e,t,n){Zt(this._ns,this._data,e,t,[],"root",n)},Xt=function(e,t){Wt.call(this,e,t,!0)},Zt=function(e,t,n,r,i,a,o,s){function l(e,t){for(f=e.length,u=a+"[]";f--;)d(e,f,t,1)}function d(t,i,a,o){var l,d;i!==Et&&(l=$e._fltr(u,t[i],v,r))&&(d=v.slice(),o&&g&&d[0]!==g&&d.unshift(g),Zt(e,l,n,r||(o?void 0:0),d,u,a,s))}function c(e,t){switch(a=e.data.observeAll._path,g=e.target,t.change){case"insert":l(t.items);break;case"remove":l(t.items,!0);break;case"refresh":l(t.oldItems,!0),l(e.target);break;case"set":u=a+"."+t.path,d(t,"oldValue",!0),d(t,"value")}g=void 0,n.apply(this,arguments)}var f,p,u,v,g,h,_=!s||s.un||!o;if(t&&typeof t===ht){if(v=[t].concat(i),p=Me(t)?"":"*",s&&_&&Mt(t)&&s[h=Pt(t).obId])return void s[h]++;if(s||(s={un:o}),n){if(p||0!==r)if(c._cId=Dt(n),_)Re(e,t,p,c,o,r,v,a),h=Pt(t).obId,s[h]=(s[h]||0)+1;else{if(--s[Pt(t).obId])return;Re(e,t,p,c,o,r,v,a)}}else s&&(s[Pt(t).obId]=1),Re(e,t,p,void 0,o,r,v,a);if(p)for(f in t)u=a+"."+f,d(t,f,o);else l(t,o)}},Gt=function(e){return e.indexOf(".")<0&&e.indexOf("[")<0},Yt=function(){return[].push.call(arguments,!0),Re.apply(this,arguments)};Re=function(){function e(){function i(e,r,i,a){var o,s,l=Mt($),d=Kt($),c=I,f=E;if(e=n?e+"."+n:e,!g&&(a||i))for(w=l&&t._data($),w=w&&w.events,w=w&&w[i?Nt:Vt],b=w&&w.length;b--;)if(x=w[b]&&w[b].data,x&&(a&&x.ns!==n||!a&&x.ns===n&&x.cb&&x.cb._cId===h._cId))return;g||a?t(d).off(e,zt):(s=i?{}:{fullPath:u,paths:r?[r]:[],prop:p},s.ns=n,s.cb=h,E&&(s.observeAll={_path:f,path:function(){return o=c.length,f.replace(/[[.]/g,function(e){return o--,"["===e?"["+t.inArray(c[o-1],c[o]):"."})},parents:function(){return c},filter:T}),t(d).on(e,null,s,zt),C&&(C[Pt($).obId||Pt($,"obId",Rt++)]=$))}function o(t){var n=R;return t.ob=y(t,n),t.cb=function(i,a){var o=t.ob,l=t.sb,d=y(t,n);d!==o&&(typeof o===ht&&(s(o,!0),(l||r&&Me(o))&&e([o],l,h,y,!0)),t.ob=d,typeof d===ht&&(s(d),(l||r&&Me(d))&&e([d],l,h,y))),h(i,a)}}function s(e,t,n,a){if(r){var o=$,s=E;$=e,a&&($=e[a],E+="."+a),T&&$&&($=$e._fltr(E,$,a?[e].concat(I):I,T)),$&&(n||Me($))&&i(Nt+".observe"+(h?Dt(h):""),void 0,!0,t),$=o,E=s}}var l,d,c,f,p,u,v,g,h,_,m,b,x,w,y,k,C,j,A,I,E,T,S,V,N=Bt,L=1!=this?It.apply([],arguments):jt.call(arguments),B=L.pop()||!1,R=L.shift(),$=R,F=L.length;if(B+""===B&&(E=B,I=L.pop(),T=L.pop(),B=!!L.pop(),F-=3),B===!!B&&(g=B,B=L[F-1],B=!F||B+""===B||B&&!Fe(B)?void 0:(F--,L.pop()),g&&!F&&Fe(R)&&(B=R,R=void 0)),h=B,F&&Fe(L[F-1])&&(y=h,h=L.pop(),F--),!g||!h||h._cId){for(N+=h?(m=h._inId||"",g?h._cId+m:(_=Dt(h))+m):"",_&&!g&&(C=Lt[_]=Lt[_]||{}),S=n&&n.match(St)||[""],V=S.length;V--;){if(n=S[V],R&&(u=L[0],!u||u+""!==u)&&(Me(R)?s(R,g,!0):g&&i(N,"")),g&&!F&&!R)for(d in Lt){C=Lt[d];for(x in C)$=C[x],Me($)?s($,g,g):i(N,"")}for(j=0,l=0;F>l;l++)if(u=L[l],""!==u){if($=R,""+u===u){if(f=u.split("^"),f[1]&&(j=f[0].split(".").length,u=f.join("."),j=u.split(".").length-j),y&&(k=y(u,R))){F+=k.length-1,At.apply(L,[l--,1].concat(k));continue}f=u.split(".")}else Fe(u)||(u&&u._jsv?(A=g?u.cb:o(u),A.noArray=!r,A._cId=h._cId,A._inId=A._inId||".obIn"+Ft++,(u.bnd||u.prm&&u.prm.length||!u.sb)&&e([$],u.path,[a],u.prm,A,y,g),u.sb&&e([u.ob],u.sb,h,y,g),u=a,$=void 0):$=u),f=[R=u];for(;$&&void 0!==(p=f.shift());)if(typeof $===ht){if(""+p===p){if(""===p)continue;if(f.length<j+1&&!$.nodeType){if(!g&&(w=Mt($)&&t._data($))){for(w=w.events,w=w&&w[Vt],b=w&&w.length,c=0;b--;)x=w[b].data,!x||x.ns!==n||x.cb._cId!==h._cId||x.cb._inId!==h._inId||x.prop!==p&&"*"!==x.prop&&"**"!==x.prop||((d=f.join("."))&&x.paths.push(d),c++);if(c){$=$[p];continue}}if("*"===p||"**"===p){if(!g&&w&&w.length&&i(N,"",!1,!0),"*"===p){i(N,"");for(d in $)d!==Et&&s($,g,void 0,d)}else t.observable(n,$)[(g?"un":"")+"observeAll"](h);break}p&&i(N+".p_"+p,f.join("^"))}E&&(E+="."+p),p=$[p]}if(Fe(p)){(v=p.depends)&&e([$],Ht(v,$,h),h,y,g);break}$=p,g&&$===R&&(l>F-2||L[l+1]+""!==L[l+1])&&i(N,"")}s($,g)}}return _&&Jt(C,_),{cbId:_,bnd:C}}}var n,r=0!=this,i=jt.call(arguments),a=i[0];return a+""===a&&r&&(n=a,i.shift(),a=i[0]),e.apply(1,i)},$e=function(e,t){return 1===arguments.length&&(t=e,e=""),Me(t)?new qt(e,t):new Ut(e,t)},qe.getDeps=function(){var e=arguments;return function(){for(var t,n,r=[],i=e.length;i--;)t=e[i--],n=e[i],n&&(r=r.concat(Fe(n)?n(t,t):n));return r}},t.observable=$e,$e._fltr=function(e,t,n,r){return(r&&Fe(r)?r(e,t,n):!0)?(t=Fe(t)?t.set&&t.call(n[0]):t,typeof t===ht&&t):void 0},$e.Object=Ut,$e.Array=qt,t.observe=$e.observe=Re,t.unobserve=$e.unobserve=Yt,$e._apply=Qt,Ut.prototype={_data:null,observeAll:Wt,unobserveAll:Xt,data:function(){return this._data},setProperty:function(e,t,n){e=e||"";var r,i,a,o=e+""!==e,s=this,l=s._data;if(l)if(o)if(n=t,Me(e))for(r=e.length;r--;)i=e[r],s.setProperty(i.name,i.value,void 0===n||n);else for(r in e)s.setProperty(r,e[r],n);else if(e!==Et){for(a=e.split(".");l&&a.length>1;)l=l[a.shift()];l&&s._setProperty(l,a[0],t,n)}return s},removeProperty:function(e){return this.setProperty(e,Ot),this},_setProperty:function(e,t,n,r){var i,a,o,s=t?e[t]:e;Fe(s)&&s.set&&(e=e._wrp||e,a=s,i=a.set===!0?a:a.set,s=a.call(e)),(s!==n||r&&s!=n)&&(!(s instanceof Date)||s>n||n>s)&&(i?(i.call(e,n),n=a.call(e)):(o=n===Ot)?void 0!==s?(delete e[t],n=void 0):t=void 0:t&&(e[t]=n),t&&this._trigger(e,{change:"set",path:t,value:n,oldValue:s,remove:o}))},_trigger:function(e,n){t(e).triggerHandler(Vt+(this._ns?"."+/^\S+/.exec(this._ns)[0]:""),n)}},qt.prototype={_data:null,observeAll:Wt,unobserveAll:Xt,data:function(){return this._data},insert:function(e,t){var n=this._data;return 1===arguments.length&&(t=e,e=n.length),e=Tt(e),e>-1&&e<=n.length&&(t=Me(t)?t:[t],t.length&&this._insert(e,t)),this},_insert:function(e,t){var n=this._data,r=n.length;At.apply(n,[e,0].concat(t)),this._trigger({change:"insert",index:e,items:t},r)},remove:function(e,t){var n,r=this._data;return void 0===e&&(e=r.length-1),e=Tt(e),t=t?Tt(t):0===t?0:1,t>-1&&e>-1&&(n=r.slice(e,e+t),t=n.length,t&&this._remove(e,t,n)),this},_remove:function(e,t,n){var r=this._data,i=r.length;r.splice(e,t),this._trigger({change:"remove",index:e,items:n},i)},move:function(e,t,n){if(n=n?Tt(n):0===n?0:1,e=Tt(e),t=Tt(t),n>0&&e>-1&&t>-1&&e!==t){var r=this._data.slice(e,e+n);n=r.length,n&&this._move(e,t,n,r)}return this},_move:function(e,t,n,r){var i=this._data,a=i.length;i.splice(e,n),At.apply(i,[t,0].concat(r)),this._trigger({change:"move",oldIndex:e,index:t,items:r},a)},refresh:function(e){var t=this._data.slice();return this._refresh(t,e),this},_refresh:function(e,t){var n=this._data,r=n.length;At.apply(n,[0,n.length].concat(t)),this._trigger({change:"refresh",oldItems:e},r)},_trigger:function(e,n){var r=this._data,i=r.length,a=t([r]);i!==n&&a.triggerHandler(Vt,{change:"set",path:"length",value:i,oldValue:n}),a.triggerHandler(Nt+(this._ns?"."+/^\S+/.exec(this._ns)[0]:""),e)}},Ct[Vt]=Ct[Nt]={remove:function(e){var n,r,i,a,o,s=e.data;if(s&&(s.off=!0,s=s.cb)&&(n=Lt[s._cId])){for(i=t._data(this).events[e.type],a=i.length;a--&&!r;)r=(o=i[a].data)&&o.cb&&o.cb._cId===s._cId;r||(delete n[Pt(this).obId],Jt(n,s._cId))}}},Be.map=function(e){function n(t,n,r,i){var a,o=this;this.src&&this.unmap(),typeof t===ht&&(o.src=t,o.tgt=r||o.tgt||[],o.options=n||o.options,o.update(),i||(e.obsSrc&&$e(o.src).observeAll(o.obs=function(t,n){a||(a=!0,e.obsSrc(o,t,n),a=void 0)},o.srcFlt),e.obsTgt&&$e(o.tgt).observeAll(o.obt=function(t,n){a||(a=!0,e.obsTgt(o,t,n),a=void 0)},o.tgtFlt)))}return Fe(e)&&(e={getTgt:e}),e.baseMap&&(e=t.extend({},e.baseMap,e)),e.map=function(e,t,r,i){return new n(e,t,r,i)},(n.prototype={srcFlt:e.srcFlt||Gt,tgtFlt:e.tgtFlt||Gt,update:function(t){var n=this;$e(n.tgt).refresh(e.getTgt(n.src,n.options=t||n.options))},unmap:function(){var e=this;e.src&&(e.obs&&$e(e.src).unobserveAll(e.obs,e.srcFlt),e.obt&&$e(e.tgt).unobserveAll(e.obt,e.tgtFlt),e.src=void 0)},map:n,_def:e}).constructor=n,e},qe.advSet=function(){e._jsv=Ke.advanced._jsv?{cbBindings:Lt}:void 0}}if(Je=Be.settings,Oe=Be.converters,Ue=Be.tags,lt=/<(?!script)(\w+)[>\s]/,t.link)return t;var en,tn,nn,rn,an,on,sn,ln,dn="data-jsv",cn="change.jsv",fn="onBeforeChange",pn="onAfterChange",un="onAfterCreate",vn="checked",gn="checkbox",hn="radio",_n="input[type=radio]",mn="none",bn="SCRIPT",xn="true",wn='"></script>',yn='<script type="jsv',kn=dn+"-df",Cn="script,["+dn+"]",jn={value:"val",input:"val",html:gt,text:"text"},An={from:"value",to:"value"},In=0,En=t.cleanData,Tn=Je.delimiters,Sn=document.createDocumentFragment(),Vn=document.querySelector,Nn={ol:1,ul:1,table:1,tbody:1,thead:1,tfoot:1,tr:1,colgroup:1,dl:1,select:1,optgroup:1,svg:1,svg_ns:1},Ln={tr:"table"},Bn={br:1,img:1,input:1,hr:1,area:1,base:1,col:1,link:1,meta:1,command:1,embed:1,keygen:1,param:1,source:1,track:1,wbr:1},Rn={},$n={},Fn=1,Mn=/^#(view\.?)?/,Pn=/((\/>)|<\/(\w+)>|)(\s*)([#\/]\d+(?:_|(\^)))`(\s*)(<\w+(?=[\s\/>]))?|\s*(?:(<\w+(?=[\s\/>]))|<\/(\w+)>(\s*)|(\/>)\s*|(>)|$)/g,On=/(#)()(\d+)(_)/g,Dn=/(#)()(\d+)([_^])/g,Un=/(?:(#)|(\/))(\d+)(_)/g,qn=/(#)()(\d+)(\^)/g,Kn=/(?:(#)|(\/))(\d+)([_^])([-+@\d]+)?/g,Hn=/&(\d+)\+?/g,Jn=e.getComputedStyle;if($e=t.observable,!$e)throw requiresStr+"JsObservable";return Re=$e.observe,qe.onStore.template=function(e,n){n.link=ne,e&&(t.link[e]=function(){return ne.apply(n,arguments)})},qe.viewInfos=de,(Je.delimiters=function(){var e=Tn.apply(0,arguments);return tn=new RegExp("(?:^|\\s*)([\\w-]*)(\\"+Ze+")?(\\"+Qe+qe.rTag+"(:\\w*)?\\"+We+")","g"),e})(),qe.addSetting("trigger"),Oe.merge=function(e){var t,n=this.linkCtx._val||"",r=this.tagCtx.props.toggle;return r&&(t=r.replace(/[\\^$.|?*+()[{]/g,"\\$&"),t="(\\s(?="+t+"$)|(\\s)|^)("+t+"(\\s|$))",n=n.replace(new RegExp(t),"$2"),e=n+(e?(n&&" ")+r:"")),e},Ue("on",{attr:mn,init:function(e){var t=this,n=e.props,r=e.content,i=n.elem;t._.inline&&(t.attr=gt,i=(i||"span")+">",t.template="<"+i+(n.label||r.markup||e.params.args[0])+"</"+i)},render:function(){var e=this.tagCtx;return e.render(e.view,!0)},onAfterLink:function(e,n){var r,i,a=this,o=0,s=e.args,l=s.length,d=e.props,c=d.data,f=e.view,p=d.context;for(a.activeElem=a.activeElem||t(a._.inline?(a._elCnt&&N('Use data-link="{on...}"'),a.nodes()[0]):n.elem);l>o&&!(i=Fe(r=s[o++])););i&&(i=s.slice(o),s=s.slice(0,o-1),p||(p=/^(.*)[\.^][\w$]+$/.exec(e.params.args.slice(-i.length-1)[0]),p=p&&qe.tmplFn("{:"+p[1]+"}",f.tmpl,!0)(n.data,f)),a._evs&&a.onDispose(),a.activeElem.on(a._evs=s[0]||"click",a._sel=s[1],void 0==c?null:c,a._hlr=function(e){return r.apply(p||n.data,[].concat(i,e,{change:e.type,view:f,linkCtx:n},i.slice.call(arguments,1)))}))},onUpdate:function(){return!1},onDispose:function(){this.activeElem.off(this._evs,this._sel,this._hlr)},flow:!0}),d(Ue["for"],{onArrayChange:function(e,t,n,r){var i,a=e.target,o=a.length,s=this,l=t.change;if(s._.noVws||s.tagCtxs[1]&&("insert"===l&&o===t.items.length||"remove"===l&&!o||"refresh"===l&&!t.oldItems.length!=!o))s.refresh();else for(i in s._.arrVws)i=s._.arrVws[i],i.data===a&&i._.onArrayChange.apply(i,arguments);s.domChange(n,r,t),e.done=!0},onAfterLink:function(e,t){var n,r,i,a,o=this,s=o._ars||{},l=o.tagCtxs,d=l.length,c=o.selected||0;for(n=0;c>=n;n++)e=l[n],a=e.map?e.map.tgt:e.args.length?e.args[0]:e.view.data,(i=s[n])&&a!==i[0]&&(Re(i[0],i[1],!0),delete s[n]),!s[n]&&Me(a)&&(Re(a,r=function(n,r){var i=e;o.onArrayChange(n,r,i,t)}),s[n]=[a,r]);for(n=c+1;d>n;n++)(i=s[n])&&(Re(i[0],i[1],!0),delete s[n]);o._ars=s},onDispose:function(){var e,t=this;for(e in t._ars)Re(t._ars[e][0],t._ars[e][1],!0)}}),d(Ue["if"],{onUpdate:function(e,t,n){var r,i,a;for(r=0;(i=this.tagCtxs[r])&&i.args.length;r++)if(i=i.args[0],a=!i!=!n[r].args[0],!this.convert&&i||a)return a;return!1},onAfterLink:function(e,t,n){n&&this.domChange(e,t,n)}}),Ue("props",{baseTag:"for",dataMap:Be.map({getTgt:Ue.props.dataMap.getTgt,obsSrc:Ae,obsTgt:Ie,tgtFlt:Ee}),flow:!0}),d(t,{view:nn=function(e,n,r){function i(e,t){if(e)for(o=de(e,t,On),l=0,d=o.length;d>l&&(!(a=sn[o[l].id])||!(a=a&&r?a.get(!0,r):a));l++);}n!==!!n&&(r=n,n=void 0);var a,o,s,l,d,c,f,p=0,u=document.body;if(e&&e!==u&&Le._.useKey>1&&(e=""+e===e?t(e)[0]:e.jquery?e[0]:e)){if(n){if(i(e._df,!0),!a)for(f=Vn?e.querySelectorAll(Cn):t(Cn,e).get(),c=f.length,s=0;!a&&c>s;s++)i(f[s]);return a}for(;e;){if(o=de(e,void 0,Un))for(c=o.length;c--;)if(a=o[c],a.open){if(1>p)return a=sn[a.id],a&&r?a.get(r):a||Le;p--}else p++;e=e.previousSibling||e.parentNode}}return Le},link:re,unlink:xe,cleanData:function(e){e.length&&In&&me(e),En.apply(t,arguments)}}),d(t.fn,{link:function(e,t,n,r,i,a,o){return re(e,this,t,n,r,i,a,o)},unlink:function(){return xe(this)},view:function(e,t){return nn(this[0],e,t)}}),t.each([gt,"replaceWith","empty","remove"],function(e,n){var r=t.fn[n];t.fn[n]=function(){var e;In=1;try{e=r.apply(this,arguments)}finally{In=0}return e}}),je(d(Le=qe.topView,{tmpl:{links:{}}})),sn={0:Le},ln=qe.advSet,qe.advSet=function(){ln(),e._jsv=He._jsv?d(e._jsv||{},{views:sn,bindings:$n}):void 0,rn=He.linkAttr,an=Cn+",["+rn+"]",on=He._wm,on.optgroup=on.option,on.tbody=on.tfoot=on.colgroup=on.caption=on.thead,on.th=on.td},Je.advanced({linkAttr:"data-link",useViews:!1,noValidate:!1,_wm:{option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],svg_ns:[1,"<svg>","</svg>"],div:t.support.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},_fe:{input:{from:ye,to:"value"},textarea:An,select:An,optgroup:{to:"label"}}}),t},window);
//# sourceMappingURL=jsviews.min.js.map